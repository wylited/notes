(self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([[405], { 95732: function (e, n, t) { "use strict"; t.r(n), t.d(n, { Graph: function () { return Kt }, GraphPage: function () { return Ut }, default: function () { return Yt }, getThemeColor: function () { return Jt }, hexToRGBA: function () { return Qt }, normalizeLinkEnds: function () { return Xt } }); var r = t(30266), o = t(83789), i = t(92809), l = t(80318), s = t(809), c = t.n(s), a = JSON.parse('{"a":{"nodes":[{"tags":[null],"properties":{"CATEGORY":"economics","ID":"09482338-43cc-4a77-bf7f-6ed732eb21a8","BLOCKED":"","FILE":"/home/wyli/org/notes/economics.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Economics","file":"/home/wyli/org/notes/economics.org","id":"09482338-43cc-4a77-bf7f-6ed732eb21a8"},{"tags":[null],"properties":{"CATEGORY":"macroeconomics","ID":"31c3108b-207b-44f0-9655-a23f4b852e3e","BLOCKED":"","FILE":"/home/wyli/org/notes/macroeconomics.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Macroeconomics","file":"/home/wyli/org/notes/macroeconomics.org","id":"31c3108b-207b-44f0-9655-a23f4b852e3e"},{"tags":[null],"properties":{"CATEGORY":"markets","ID":"4d4a89e0-4bda-4d38-ad2c-7f590e8d7ca3","BLOCKED":"","FILE":"/home/wyli/org/notes/markets.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Market","file":"/home/wyli/org/notes/markets.org","id":"4d4a89e0-4bda-4d38-ad2c-7f590e8d7ca3"},{"tags":[null],"properties":{"CATEGORY":"consumers","ID":"4e3fc270-7453-46de-ae38-dbdb15945ad2","BLOCKED":"","FILE":"/home/wyli/org/notes/consumers.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Consumers","file":"/home/wyli/org/notes/consumers.org","id":"4e3fc270-7453-46de-ae38-dbdb15945ad2"},{"tags":[null],"properties":{"CATEGORY":"angles_in_same_segment","ID":"54ae23e4-aaab-47eb-a279-0214b056d407","BLOCKED":"","FILE":"/home/wyli/org/notes/angles_in_same_segment.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Angles in same segment","file":"/home/wyli/org/notes/angles_in_same_segment.org","id":"54ae23e4-aaab-47eb-a279-0214b056d407"},{"tags":[null],"properties":{"CATEGORY":"firms","ID":"9078293b-8728-464f-8af5-ca3aa968d109","BLOCKED":"","FILE":"/home/wyli/org/notes/firms.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Firms","file":"/home/wyli/org/notes/firms.org","id":"9078293b-8728-464f-8af5-ca3aa968d109"},{"tags":[null],"properties":{"CATEGORY":"economy","ID":"908979e3-4240-4b4d-ad02-62e08dcc0795","BLOCKED":"","FILE":"/home/wyli/org/notes/economy.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Economies","file":"/home/wyli/org/notes/economy.org","id":"908979e3-4240-4b4d-ad02-62e08dcc0795"},{"tags":["econ"],"properties":{"CATEGORY":"macroeconomics","ID":"9a4a82b4-7443-4928-b20a-806c930d33bd","BLOCKED":"","ALLTAGS":":econ:","TAGS":":econ:","FILE":"/home/wyli/org/notes/macroeconomics.org","PRIORITY":"E","ITEM":"Macroeconomics"},"olp":null,"pos":95,"level":1,"title":"Macroeconomics","file":"/home/wyli/org/notes/macroeconomics.org","id":"9a4a82b4-7443-4928-b20a-806c930d33bd"},{"tags":[null],"properties":{"CATEGORY":"economic_good","ID":"c01a807f-754c-4a35-a42b-77a67828f82d","BLOCKED":"","FILE":"/home/wyli/org/notes/economic_good.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Economic Goods","file":"/home/wyli/org/notes/economic_good.org","id":"c01a807f-754c-4a35-a42b-77a67828f82d"},{"tags":[null],"properties":{"CATEGORY":"circle_theorem","ID":"c5a09e14-7f6c-4610-ad44-5b150ba344f8","BLOCKED":"","FILE":"/home/wyli/org/notes/circle_theorem.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"circle theorems","file":"/home/wyli/org/notes/circle_theorem.org","id":"c5a09e14-7f6c-4610-ad44-5b150ba344f8"},{"tags":["econ"],"properties":{"CATEGORY":"microeconomics","ID":"caa91b2e-ea73-4314-955c-4021e47d493a","BLOCKED":"","ALLTAGS":":econ:","TAGS":":econ:","FILE":"/home/wyli/org/notes/microeconomics.org","PRIORITY":"E","TODO":"TODO","ITEM":"Micro Economics"},"olp":null,"pos":95,"level":1,"title":"Micro Economics","file":"/home/wyli/org/notes/microeconomics.org","id":"caa91b2e-ea73-4314-955c-4021e47d493a"},{"tags":[null],"properties":{"CATEGORY":"microeconomics","ID":"d4a0e3eb-cca0-43bb-a893-7ae8e8cda9b8","BLOCKED":"","FILE":"/home/wyli/org/notes/microeconomics.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"Microeconomics","file":"/home/wyli/org/notes/microeconomics.org","id":"d4a0e3eb-cca0-43bb-a893-7ae8e8cda9b8"},{"tags":[null],"properties":{"CATEGORY":"angle_at_center","ID":"f9cd5f00-9257-4074-a6c8-b0389fa6f58d","BLOCKED":"","FILE":"/home/wyli/org/notes/angle_at_center.org","PRIORITY":"E"},"olp":null,"pos":1,"level":0,"title":"angle at center theorem","file":"/home/wyli/org/notes/angle_at_center.org","id":"f9cd5f00-9257-4074-a6c8-b0389fa6f58d"}],"links":[{"type":"id","target":"09482338-43cc-4a77-bf7f-6ed732eb21a8","source":"caa91b2e-ea73-4314-955c-4021e47d493a"},{"type":"id","target":"4e3fc270-7453-46de-ae38-dbdb15945ad2","source":"caa91b2e-ea73-4314-955c-4021e47d493a"},{"type":"id","target":"9078293b-8728-464f-8af5-ca3aa968d109","source":"caa91b2e-ea73-4314-955c-4021e47d493a"},{"type":"id","target":"4d4a89e0-4bda-4d38-ad2c-7f590e8d7ca3","source":"caa91b2e-ea73-4314-955c-4021e47d493a"},{"type":"id","target":"c01a807f-754c-4a35-a42b-77a67828f82d","source":"caa91b2e-ea73-4314-955c-4021e47d493a"},{"type":"id","target":"09482338-43cc-4a77-bf7f-6ed732eb21a8","source":"9a4a82b4-7443-4928-b20a-806c930d33bd"},{"type":"id","target":"908979e3-4240-4b4d-ad02-62e08dcc0795","source":"9a4a82b4-7443-4928-b20a-806c930d33bd"},{"type":"id","target":"c5a09e14-7f6c-4610-ad44-5b150ba344f8","source":"54ae23e4-aaab-47eb-a279-0214b056d407"},{"type":"id","target":"c5a09e14-7f6c-4610-ad44-5b150ba344f8","source":"f9cd5f00-9257-4074-a6c8-b0389fa6f58d"}],"tags":["econ"]}}'), d = t(97375), u = t(68527), h = t(47398), g = t(68921), f = t(105), p = t(27549), x = t(74376), b = t(52596), j = t(9008), v = t(67294), m = t(32802), y = t.n(m), C = t(47516), O = t(63750), w = t(31122), k = t(7520), S = t(36194), I = [], D = {}; for (var P in S.oY) for (var N in S.oY[P]) { var B = P + N; "LinearNone" === B && (B = "Linear"), I.push(B), D[B] = S.oY[P][N] } var E = D, L = { enabled: !0, charge: -700, collision: !0, collisionStrength: 20, centering: !0, centeringStrength: .2, linkStrength: .3, linkIts: 1, alphaDecay: .05, alphaTarget: 0, alphaMin: 0, velocityDecay: .25, gravity: .3, gravityOn: !0, gravityLocal: !1 }, T = { orphans: !1, dailies: !1, parent: "heading", filelessCites: !1, tagsBlacklist: [], tagsWhitelist: [], dirsBlocklist: [], dirsAllowlist: [], bad: !0, nodes: [], links: [], date: [], noter: !0 }, R = { method: "degree" }, F = { particles: !1, particlesNumber: 0, particlesWidth: 4, arrows: !1, arrowsLength: 1, arrowsPos: .5, arrowsColor: "", linkOpacity: .8, linkWidth: 1, nodeRel: 3, nodeOpacity: 1, nodeResolution: 12, labels: 2, labelScale: 1.5, labelFontSize: 10, labelLength: 40, labelWordWrap: 25, labelLineSpace: 1, labelDynamicDegree: 8, labelDynamicStrength: .5, highlight: !0, highlightNodeSize: 1.1, highlightLinkSize: .7, highlightFade: .8, highlightAnim: !0, animationSpeed: 360, algorithmOptions: I, algorithmName: "CircularOut", linkColorScheme: "gray.500", nodeColorScheme: ["red.500", "gray.600", "yellow.500", "green.500", "cyan.500", "blue.500", "pink.500", "purple.500", "orange.500"], nodeHighlight: "purple.500", linkHighlight: "purple.500", backgroundColor: "white", emacsNodeColor: "gray.800", labelTextColor: "black", labelBackgroundColor: "", labelBackgroundOpacity: .7, citeDashes: !0, citeDashLength: 35, citeGapLength: 15, citeLinkColor: "gray.700", citeLinkHighlightColor: "", citeNodeColor: "black", refDashes: !0, refDashLength: 35, refGapLength: 15, refLinkColor: "gray.700", refLinkHighlightColor: "", refNodeColor: "black", nodeSizeLinks: .5, nodeZoomSize: 1.2 }, z = { follow: "zoom", localSame: "add", zoomPadding: 200, zoomSpeed: 2e3 }, Z = { highlight: "hover", local: "double", follow: "never", context: "right", preview: "click", backgroundExitsLocal: !1 }, H = { neighbors: 1 }, A = ["red.500", "orange.500", "yellow.500", "green.500", "cyan.500", "blue.500", "pink.500", "purple.500", "white", "gray.100", "gray.200", "gray.300", "gray.400", "gray.500", "gray.600", "gray.700", "gray.800", "gray.900", "black"], M = t(57324), W = t(90232), V = t(52072); function _(e, n, t) { t.send(JSON.stringify({ command: e, data: n })) } function G(e, n) { _("open", { id: e.id }, n) } var Y = t(10219), U = t(44592), K = t(38554), q = t.n(K), X = t(53869), J = t(99860); function Q(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function $(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Q(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Q(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var ee = { ease: [.25, .1, .25, 1], easeIn: [.4, 0, 1, 1], easeOut: [0, 0, .2, 1], easeInOut: [.4, 0, .2, 1] }; var ne = function (e, n) { return $($({}, e), {}, { delay: (0, U.hj)(n) ? n : null === n || void 0 === n ? void 0 : n.enter }) }, te = function (e, n) { return $($({}, e), {}, { delay: (0, U.hj)(n) ? n : null === n || void 0 === n ? void 0 : n.exit }) }, re = t(85893), oe = ["in", "unmountOnExit", "animateOpacity", "startingSize", "endingSize", "dimension", "style", "className", "transition", "transitionEnd"]; function ie(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function le(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? ie(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ie(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var se = function (e) { return null != e && parseInt(e.toString(), 10) > 0 }, ce = { exit: { size: { duration: .2, ease: ee.ease }, opacity: { duration: .3, ease: ee.ease } }, enter: { size: { duration: .3, ease: ee.ease }, opacity: { duration: .4, ease: ee.ease } } }, ae = { exit: function (e) { var n, t, r = e.animateOpacity, o = e.startingSize, l = e.transition, s = e.transitionEnd, c = e.delay, a = e.dimension; return le(le({}, r && { opacity: se(o) ? 1 : 0 }), {}, (t = { overflow: "hidden" }, (0, i.Z)(t, a, o), (0, i.Z)(t, "transitionEnd", null === s || void 0 === s ? void 0 : s.exit), (0, i.Z)(t, "transition", null !== (n = null === l || void 0 === l ? void 0 : l.exit) && void 0 !== n ? n : te(ce.exit, c)), t)) }, enter: function (e) { var n, t, r = e.animateOpacity, o = e.endingSize, l = e.transition, s = e.transitionEnd, c = e.delay, a = e.dimension; return le(le({}, r && { opacity: 1 }), {}, (t = {}, (0, i.Z)(t, a, o), (0, i.Z)(t, "transitionEnd", null === s || void 0 === s ? void 0 : s.enter), (0, i.Z)(t, "transition", null !== (n = null === l || void 0 === l ? void 0 : l.enter) && void 0 !== n ? n : ne(ce.enter, c)), t)) } }, de = v.forwardRef((function (e, n) { var t = e.in, r = e.unmountOnExit, o = e.animateOpacity, i = void 0 === o || o, s = e.startingSize, c = void 0 === s ? 0 : s, a = e.endingSize, d = void 0 === a ? "auto" : a, u = e.dimension, h = void 0 === u ? "height" : u, g = e.style, f = e.className, p = e.transition, x = e.transitionEnd, b = (0, Y.Z)(e, oe), j = v.useState(!1), m = (0, l.Z)(j, 2), y = m[0], C = m[1]; v.useEffect((function () { var e = setTimeout((function () { C(!0) })); return function () { return clearTimeout(e) } }), []), (0, U.ZK)({ condition: Boolean(c > 0 && r), message: "startingSize and unmountOnExit are mutually exclusive. You can't use them together" }); var O = parseFloat(c.toString()) > 0, w = { startingSize: c, endingSize: d, animateOpacity: i, dimension: h, transition: y ? p : { enter: { duration: 0 } }, transitionEnd: q()(x, { enter: { overflow: "initial" }, exit: r ? void 0 : { display: O ? "block" : "none" } }) }, k = !r || t, S = t || r ? "enter" : "exit"; return (0, re.jsx)(X.M, { initial: !1, custom: w, children: k && (0, re.jsx)(J.E.div, le(le({ ref: n }, b), {}, { className: (0, U.cx)("chakra-collapse", f), style: le({ overflow: "hidden", display: "block" }, g), custom: w, variants: ae, initial: !!r && "exit", animate: S, exit: "exit" })) }) })); function ue(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function he(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? ue(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ue(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } U.Ts && (de.displayName = "Collapse"); var ge = function (e) { var n = e.setTagColors, t = e.setFilter, r = e.filter, l = e.tagColors, s = e.target, c = r.tagsBlacklist, a = r.tagsWhitelist, h = c.indexOf(s) > -1, g = a.indexOf(s) > -1, f = (0, d.qY)(); return (0, re.jsxs)(re.Fragment, { children: [(0, re.jsx)(M.sN, { icon: (0, re.jsx)(u.Box, { bgColor: l[s], borderRadius: "sm", height: 3, width: 3, borderColor: l[s] || "gray.600", borderWidth: 1 }), closeOnSelect: !1, onClick: f.onToggle, children: (0, re.jsx)(u.Text, { children: "Change color" }) }), (0, re.jsx)(de, { in: f.isOpen, children: (0, re.jsxs)(u.Flex, { ml: 2, mt: 2, flexWrap: "wrap", children: [(0, re.jsx)(u.Box, { children: (0, re.jsx)(u.Box, { tabIndex: 0, cursor: "pointer", onClick: function () { return n((function (e) { return Object.fromEntries(Object.keys(e).filter((function (e) { return e !== s })).map((function (n) { return [n, e[n]] }))) })) }, bgColor: "", m: 1, borderRadius: "sm", borderColor: "gray.600", borderWidth: 1, height: 3, width: 3 }) }, "empty"), A.map((function (e) { return (0, re.jsx)(u.Box, { children: (0, re.jsx)(u.Box, { tabIndex: 0, cursor: "pointer", onClick: function () { return n(he(he({}, l), {}, (0, i.Z)({}, s, e))) }, bgColor: e, m: 1, borderRadius: "sm", height: 3, width: 3 }) }, e) }))] }) }), !g && (0, re.jsx)(M.sN, { onClick: function () { t(h ? function (e) { return he(he({}, e), {}, { tagsBlacklist: e.tagsBlacklist.filter((function (e) { return e !== s })) }) } : function (e) { return he(he({}, e), {}, { tagsBlacklist: [].concat((0, o.Z)(e.tagsBlacklist), [s]) }) }) }, icon: h ? (0, re.jsx)(V.MinusIcon, {}) : (0, re.jsx)(V.ViewOffIcon, {}), children: h ? "Remove from blocklist" : "Add to blocklist" }), !h && (0, re.jsx)(M.sN, { onClick: function () { t(g ? function (e) { return he(he({}, e), {}, { tagsWhitelist: e.tagsWhitelist.filter((function (e) { return e !== s })) }) } : function (e) { return he(he({}, e), {}, { tagsWhitelist: [].concat((0, o.Z)(e.tagsWhitelist), [s]) }) }) }, icon: g ? (0, re.jsx)(V.MinusIcon, {}) : (0, re.jsx)(V.ViewIcon, {}), children: g ? "Remove from allowlist" : "Add to allowlist" })] }) }, fe = function (e) { e.background; var n, t, r = e.target, o = (e.nodeType, e.coordinates), i = e.handleLocal, l = e.menuClose, s = e.scope, c = e.webSocket, a = e.setPreviewNode, h = e.setTagColors, f = e.tagColors, p = e.setFilter, x = e.filter, b = (0, d.qY)(), j = b.isOpen, m = b.onOpen, y = b.onClose; (0, v.useRef)(); return (0, re.jsxs)(re.Fragment, { children: [(0, re.jsx)(M.v2, { defaultIsOpen: !0, closeOnBlur: !1, onClose: function () { return l() }, children: (0, re.jsx)(M.qy, { zIndex: "overlay", bgColor: "white", color: "black", position: "absolute", left: o.left, top: o.top, right: o.right, bottom: o.bottom, fontSize: "xs", boxShadow: "xl", children: "string" !== typeof r ? (0, re.jsxs)(re.Fragment, { children: [r && (0, re.jsxs)(re.Fragment, { children: [(0, re.jsx)(u.Heading, { size: "xs", isTruncated: !0, px: 3, py: 1, children: r.title }), (0, re.jsx)(M.R, { borderColor: "gray.500" })] }), 0 !== s.nodeIds.length && (0, re.jsxs)(re.Fragment, { children: [(0, re.jsx)(M.sN, { onClick: function () { return i(r, "add") }, icon: (0, re.jsx)(V.PlusSquareIcon, {}), children: "Expand local graph at node" }), (0, re.jsx)(M.sN, { onClick: function () { return i(r, "replace") }, icon: (0, re.jsx)(C.DvO, {}), children: "Open local graph for this node" }), (0, re.jsx)(M.sN, { onClick: function () { return i(r, "remove") }, icon: (0, re.jsx)(V.MinusIcon, {}), children: "Exclude node from local graph" })] }), null !== r && void 0 !== r && null !== (n = r.properties) && void 0 !== n && n.FILELESS ? (0, re.jsx)(M.sN, { icon: (0, re.jsx)(V.AddIcon, {}), onClick: function () { return function (e, n) { _("create", { id: e.id, title: e.title, ref: e.properties.ROAM_REFS }, n) }(r, c) }, children: "Create node" }) : (0, re.jsx)(M.sN, { icon: (0, re.jsx)(V.EditIcon, {}), onClick: function () { return G(r, c) }, children: "Open in Emacs" }), (null === r || void 0 === r || null === (t = r.properties) || void 0 === t ? void 0 : t.ROAM_REFS) && (0, re.jsx)(M.sN, { icon: (0, re.jsx)(V.ExternalLinkIcon, {}), children: "Open in Zotero" }), 0 === s.nodeIds.length && (0, re.jsx)(M.sN, { icon: (0, re.jsx)(C.DvO, {}), onClick: function () { return i(r, "replace") }, children: "Open local graph" }), (0, re.jsx)(M.sN, { icon: (0, re.jsx)(V.ViewIcon, {}), onClick: function () { a(r) }, children: "Preview" }), 0 === (null === r || void 0 === r ? void 0 : r.level) && (0, re.jsx)(M.sN, { closeOnSelect: !1, icon: (0, re.jsx)(V.DeleteIcon, { color: "red.500" }), color: "red.500", onClick: m, children: "Permanently delete note" })] }) : (0, re.jsx)(ge, { target: r, tagColors: f, filter: x, setTagColors: h, setFilter: p }) }) }), "string" !== typeof r && (0, re.jsxs)(W.u_, { isCentered: !0, isOpen: j, onClose: y, children: [(0, re.jsx)(W.ZA, {}), (0, re.jsxs)(W.hz, { zIndex: "popover", children: [(0, re.jsx)(W.xB, { children: "Delete node?" }), (0, re.jsx)(W.ol, {}), (0, re.jsx)(W.fe, { children: (0, re.jsxs)(u.VStack, { spacing: 4, display: "flex", alignItems: "flex-start", children: [(0, re.jsx)(u.Text, { children: "This will permanently delete your note:" }), (0, re.jsx)(u.Text, { fontWeight: "bold", children: null === r || void 0 === r ? void 0 : r.title }), 0 !== (null === r || void 0 === r ? void 0 : r.level) && (0, re.jsx)(u.Text, { children: "This will only delete the from this heading until but not including the next node. Your parent file and all other nodes will not be deleted." }), (0, re.jsx)(u.Text, { children: "Are you sure you want to do continue?" })] }) }), (0, re.jsxs)(W.mz, { children: [(0, re.jsx)(g.Button, { mr: 3, onClick: function () { console.log("closing"), y(), l() }, children: "Cancel" }), (0, re.jsx)(g.Button, { variant: "link", colorScheme: "red", ml: 3, onClick: function () { console.log("aaaaa"), function (e, n) { 0 === e.level && _("delete", { id: e.id, file: e.file }, n) }(r, c), y(), l() }, children: "Delete node" })] })] })] })] }) }, pe = t(5434), xe = t(51649), be = function (e) { var n = e.setJustification, t = (e.setIndent, e.setFont, e.justification), r = (e.setPreviewNode, e.canUndo), o = e.canRedo, i = (e.resetPreviewNode, e.previousPreviewNode), l = e.nextPreviewNode, s = e.outline, c = e.setOutline, a = e.collapse, d = e.setCollapse; return (0, re.jsxs)(u.Flex, { flex: "0 1 40px", pb: 3, alignItems: "center", justifyContent: "space-between", pr: 1, children: [(0, re.jsx)(u.Flex, { children: (0, re.jsxs)(g.ButtonGroup, { isAttached: !0, children: [(0, re.jsx)(h.u, { label: "Go backward", children: (0, re.jsx)(g.IconButton, { _focus: {}, variant: "subtle", icon: (0, re.jsx)(V.ChevronLeftIcon, {}), "aria-label": "Previous node", disabled: !r, onClick: function () { return i() } }) }), (0, re.jsx)(h.u, { label: "Go forward", children: (0, re.jsx)(g.IconButton, { _focus: {}, variant: "subtle", icon: (0, re.jsx)(V.ChevronRightIcon, {}), "aria-label": "Next node", disabled: !o, onClick: function () { return l() } }) })] }) }), (0, re.jsxs)(u.Flex, { children: [(0, re.jsx)(h.u, { label: "Justify content", children: (0, re.jsx)(g.IconButton, { variant: "subtle", "aria-label": "Justify content", icon: [(0, re.jsx)(C.v9V, {}, "justify"), (0, re.jsx)(C.YSr, {}, "left"), (0, re.jsx)(C.RXA, {}, "right"), (0, re.jsx)(C.tr_, {}, "center")][t], onClick: function () { return n((function (e) { return (e + 1) % 4 })) } }) }), (0, re.jsx)(h.u, { label: "Toggle outline view", children: (0, re.jsx)(g.IconButton, { variant: "subtle", "aria-label": "Justify content", icon: s ? (0, re.jsx)(xe.XQM, {}) : (0, re.jsx)(xe.JfF, {}), onClick: function () { return c((function (e) { return !e })) } }) }), (0, re.jsx)(h.u, { label: "Toggle headers", children: (0, re.jsx)(g.IconButton, { variant: "subtle", "aria-label": "Toggle headers", icon: a ? (0, re.jsx)(pe.omV, {}) : (0, re.jsx)(pe.egf, {}), onClick: function () { return d((function (e) { return !e })) } }) })] })] }) }, je = t(96356); function ve(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function me(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? ve(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ve(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var ye = function (e) { var n, t, r, i = e.filter, l = e.setFilter, s = e.tagColors, c = (e.setTagColors, e.openContextMenu), a = e.previewNode; return null !== a && void 0 !== a && a.tags && null !== (null === a || void 0 === a || null === (n = a.tags) || void 0 === n ? void 0 : n[0]) ? (0, re.jsx)(u.Flex, { mb: 2, flexWrap: "wrap", children: null === a || void 0 === a || null === (t = a.tags) || void 0 === t || null === (r = t.map) || void 0 === r ? void 0 : r.call(t, (function (e) { var n, t, r, a = null !== (n = i.tagsBlacklist) && void 0 !== n ? n : [], d = null !== (t = i.tagsWhitelist) && void 0 !== t ? t : [], u = a.includes(e), h = d.includes(e); return (0, re.jsxs)(je.Tag, { tabIndex: 0, mr: 2, mt: 2, onContextMenu: function (n) { n.preventDefault(), c(e, n) }, cursor: "pointer", onClick: function () { l(u ? function (n) { return me(me({}, n), {}, { tagsBlacklist: n.tagsBlacklist.filter((function (n) { return n !== e })), tagsWhitelist: [].concat((0, o.Z)(n.tagsWhitelist), [e]) }) } : h ? function (n) { return me(me({}, n), {}, { tagsWhitelist: n.tagsWhitelist.filter((function (n) { return n !== e })) }) } : function (n) { return me(me({}, n), {}, { tagsBlacklist: [].concat((0, o.Z)(n.tagsBlacklist), [e]) }) }) }, size: "sm", variant: "outline", colorScheme: (null === (r = s[e]) || void 0 === r ? void 0 : r.replaceAll(/(.*?)\..*/g, "$1")) || void 0, children: [(0, re.jsx)(je.TagLabel, { children: e }), u ? (0, re.jsx)(je.TagRightIcon, { as: V.ViewOffIcon }) : h ? (0, re.jsx)(je.TagRightIcon, { as: V.ViewIcon }) : null] }, e) })) }) : null }, Ce = t(18835), Oe = t.n(Ce), we = t(13816), ke = t.n(we), Se = t(42728), Ie = t.n(Se), De = t(77890), Pe = t.n(De), Ne = t(94986), Be = t.n(Ne), Ee = t(88541), Le = t.n(Ee), Te = t(71167), Re = t.n(Te), Fe = (t(85062), t(27431)), ze = t.n(Fe), Ze = t(12861), He = t.n(Ze), Ae = t(10043), Me = t.n(Ae), We = t(80816), Ve = t(93545), _e = t.n(Ve), Ge = t(15941), Ye = t.n(Ge), Ue = t(67597), Ke = t.n(Ue), qe = t(44549), Xe = t.n(qe), Je = t(78818), Qe = t.n(Je), $e = t(32095), en = t(46871), nn = t(29356), tn = { ".headingFlex": { flexDirection: "row-reverse", justifyContent: "flex-end" }, ".outlineHeadingButton": { display: "none" }, h1: { color: "black", lineHeight: "1.2", fontSize: "16", fontWeight: "bold", paddingTop: 2 }, h2: { fontSize: "14", color: "black", fontWeight: "bold", fontStyle: "bold italic", paddingTop: 2 }, h3: { fontSize: "13", color: "black", paddingTop: 2 }, h4: { fontSize: "12", fontStyle: "italic", color: "black", paddingTop: 2 }, ".sectionContent": { paddingTop: 2 } }, rn = { ".headingFlex": { flexDirection: "row", justifyContent: "flex-start" }, ".viewerHeadingButton": { display: "none" }, ".sectionContent": { mt: 3, paddingLeft: 4, ml: "11px", borderLeftWidth: "1px", borderLeftColor: "gray.500" }, ".preHeadingContent": {}, "h1,h2,h3,h4,h5,h6,h7,h8": { pl: 1, lineHeight: "1.25", color: "black", fontSize: 15, fontWeight: 700 }, ".sec": { pt: 1 }, ".wrapClass > div > p": { mb: 2 }, p: { fontWeight: 500, fontSize: 14, pb: 2 } }, on = { ".katex": { overflowX: "scroll" }, ol: { paddingLeft: 4, py: 1 }, "li::marker": { fontSize: 12, fontWeight: "bold" }, li: { pt: 1 }, ul: { paddingLeft: "5" }, p: { fontSize: "14", fontWeight: "500 !important", pb: 2 }, div: { hyphens: "auto !important" }, ".title": { textAlign: "center", marginBottom: ".2em" }, ".subtitle": { textAlign: "center", fontSize: "medium", fontWeight: "bold", marginTop: 0 }, ".TODO": { color: "red.500" }, ".equationContainer": { display: "table", textAlign: "center", width: "100%" }, ".equation": { verticalAlign: "middle" }, ".equation-label": { display: "tableCell", textAlign: "right", verticalAlign: "middle" }, ".inlinetask": { padding: "10px", border: "2px solid gray", margin: "10px", background: "#ffffcc" }, "#org-div-home-and-up": { textAlign: "right", fontSize: "70 % ", whiteSpace: "nowrap" }, textarea: { overflowX: "auto" }, ".linenr": { fontSize: "smaller" }, ".org-info-js_info-navigation": { borderStyle: "none" }, "#org-info-js_console-label": { fontSize: "10px", fontWeight: "bold", whiteSpace: "nowrap" }, ".org-info-js_search-highlight": { backgroundColor: "#ffff00", color: "#000000", fontWeight: "bold" }, ".org-svg": { width: "90%" }, ".DONE": { color: "green" }, ".priority": { fontFamily: "monospace", color: "orange" }, ".tag": { backgroundColor: "white", fontFamily: "monospace", padding: "2px", fontSize: "80%", fontWeight: "normal" }, ".timestamp": { color: "#bebebe" }, ".timestamp-kwd": { color: "#5f9ea0" }, ".org-right": { marginLeft: "auto", marginRight: "0px", textAlign: "right" }, ".org-left": { marginLeft: "0px", marginRight: "auto", textAlign: "left" }, ".org-center": { marginLeft: "auto", marginRight: "auto", textAlign: "center" }, ".underline": { textDecoration: "underline" }, "#postamble p": { fontSize: "90%", margin: ".2em" }, "#preamble p": { fontSize: "90%", margin: ".2em" }, "p.verse": { marginLeft: "3%" }, pre: { borderRadius: "3px", backgroundColor: "white", padding: "8pt", fontFamily: "monospace", overflow: "auto", margin: "1.2em" }, "pre.src": { position: "relative", overflow: "auto" }, "pre.src:before": { display: "none", position: "absolute", top: "-8px", right: "12px", padding: "3px", backgroundColor: "white" }, "caption.t-above": { captionSide: "top" }, "caption.t-bottom": { captionSide: "bottom" }, "th.org-right": { textAlign: "center" }, "th.org-left": { textAlign: "center" }, "th.org-center": { textAlign: "center" }, "td.org-right": { textAlign: "right" }, "td.org-left": { textAlign: "left" }, "td.org-center": { textAlign: "center" }, ".footpara": { display: "inline" }, ".footdef": { marginBottom: "1em" }, ".figure": { padding: "1em" }, ".figure p": { textAlign: "center" } }, ln = t(86658), sn = ["style"]; function cn(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function an(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? cn(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : cn(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var dn = function (e) { var n = e.noUnderline, t = e.id, r = e.setSidebarHighlightedNode, o = e.setPreviewNode, i = e.nodeById, l = e.openContextMenu, s = e.href, c = e.children, a = e.isWiki, d = (0, v.useContext)(nn.N).highlightColor, h = Jt(d, (0, f.Fg)()), g = (s.replaceAll(/(.*?)\:?.*/g, "$1"), s.replaceAll(/.*?\:(.*)/g, "$1")), p = null !== t && void 0 !== t ? t : g, x = a ? "[[".concat(c, "]]") : c; return (0, re.jsx)(u.Text, { as: "a", onMouseEnter: function () { return r(i[p]) }, onMouseLeave: function () { return r({}) }, tabIndex: 0, display: "inline", overflow: "hidden", fontWeight: 500, color: d, textDecoration: n ? void 0 : "underline", onContextMenu: function (e) { e.preventDefault(), l(i[g], e) }, onClick: function () { return o(i[g]) }, _hover: { textDecoration: "none", cursor: "pointer", bgColor: h + "22" }, _focus: { outlineColor: d }, children: x }) }, un = function (e) { var n = e.href, t = e.children, r = (0, v.useContext)(nn.N).highlightColor; return (0, re.jsxs)(u.Link, { color: r, isExternal: !0, href: n, children: [t, (0, re.jsx)(V.ExternalLinkIcon, { mx: "1px", pb: "2px" })] }) }, hn = function (e) { var n, t = e.href, r = e.children, o = e.nodeById, i = e.setSidebarHighlightedNode, l = e.previewNode, s = e.setPreviewNode, c = e.nodeByCite, a = e.openContextMenu, d = e.outline, h = e.noUnderline, g = e.linksByNodeId, f = e.isWiki, p = e.macros, x = e.attachDir, b = (0, v.useState)(null), j = b[0], m = b[1], y = (0, v.useState)(!1), C = y[0], O = y[1], w = t.replaceAll(/(.*?)\:.*/g, "$1"), k = d ? rn : tn; console.log(l); if ((0, v.useEffect)((function () { w.replaceAll(/(http)?.*/g, "$1") || j || C && fetch("http://localhost:35901/node/".concat(B)).then((function (e) { return e.text() })).then((function (e) { "error" === e || m(e) })).catch((function (e) { return console.log(e), "Could not fetch the text for some reason, sorry!\n\n This can happen because you have an id with forward slashes (/) in it." })) }), [C, j]), !w) return (0, re.jsx)(u.Text, { color: "gray.700", children: r }); if (w.replaceAll(/(http)?.*/g, "$1")) return (0, re.jsx)(un, { href: t, children: r }); var S, I, D, P, N = t.replaceAll(/.*?\:(.*)/g, "$1"), B = function (e, n) { if ("id" === e) return n; if (e.includes("cite")) { var t, r = null !== (t = c[n]) && void 0 !== t && t; return r ? null !== r && void 0 !== r && r.properties.FILELESS ? "" : null === r || void 0 === r ? void 0 : r.id : "" } return "" }(w, N); encodeURIComponent(encodeURIComponent(null === (n = o[B]) || void 0 === n ? void 0 : n.file)); return B ? (0, re.jsx)(re.Fragment, { children: (0, re.jsxs)($e.J2, { gutter: 12, trigger: "hover", placement: "top-start", children: [(0, re.jsx)($e.xo, { children: (0, re.jsx)(u.Box, { display: "inline", onMouseEnter: function () { return O(!0) }, onMouseLeave: function () { return O(!1) }, children: (0, re.jsx)(dn, { id: B, setSidebarHighlightedNode: i, setPreviewNode: s, nodeById: o, href: t, children: r, nodeByCite: c, openContextMenu: a, noUnderline: h, isWiki: f }, null !== (S = null === (I = o[B]) || void 0 === I ? void 0 : I.title) && void 0 !== S ? S : B) }) }), (0, re.jsx)(en.h_, { children: (0, re.jsxs)($e.yk, { transform: "scale(1)", boxShadow: "xl", position: "relative", zIndex: "tooltip", onMouseEnter: function () { var e; i(null !== (e = o[B]) && void 0 !== e ? e : {}) }, onMouseLeave: function () { i({}) }, children: [(0, re.jsx)($e.QH, {}), (0, re.jsx)($e.b, { pb: 5, fontSize: "xs", position: "relative", zIndex: "tooltip", transform: "scale(1)", width: "100%", children: (0, re.jsx)(ln.$B, { autoHeight: !0, autoHeightMax: 300, autoHide: !0, renderThumbVertical: function (e) { var n = e.style, t = (0, Y.Z)(e, sn); return (0, re.jsx)(u.Box, an({ style: an(an({}, n), {}, { borderRadius: 0 }) }, t)) }, children: (0, re.jsx)(u.Box, { w: "100%", color: "black", px: 3, sx: an(an({}, on), k), children: (0, re.jsx)(Cn, { previewText: j, nodeById: o, setSidebarHighlightedNode: i, setPreviewNode: s, nodeByCite: c, openContextMenu: a, outline: d, linksByNodeId: g, macros: p, attachDir: x, previewNode: o[B], collapse: !1 }) }) }) })] }, null !== (D = null === (P = o[B]) || void 0 === P ? void 0 : P.title) && void 0 !== D ? D : B) })] }) }) : (0, re.jsx)(u.Text, { as: "span", display: "inline", className: t, color: "base.700", cursor: "not-allowed", children: r }) }, gn = t(25675), fn = t(62520), pn = t.n(fn), xn = function (e) { var n = e.src, t = e.file, r = (0, v.useState)(null); r[0], r[1]; if (n.replaceAll(/(http)?.*/g, "$1")) return console.log(n.replaceAll(/(http)?.*/g, "$1")), (0, re.jsx)(gn.default, { layout: "responsive", loader: function (e) { var n = e.src; return e.width, e.quality, "".concat(n) }, src: n, alt: "", width: "auto", height: "auto" }); var o = n.replaceAll(/file:/g, ""), i = pn().dirname(t), l = pn().isAbsolute(o) || "~" === o.slice(0, 1) ? o : pn().join(i, o), s = encodeURIComponent(encodeURIComponent(l)); return (0, re.jsx)(u.Container, { my: 4, position: "relative", children: (0, re.jsx)("img", { alt: "Wow, an image.", src: "http://localhost:35901/img/".concat(s) }) }) }, bn = t(14578), jn = (0, v.createContext)({ outline: !1, collapse: !0 }), vn = function (e) { var n = e.children, t = e.className, r = (0, v.useState)(!0), o = r[0], i = r[1], l = (0, v.useContext)(jn).collapse; if ((0, v.useEffect)((function () { i(!l) }), [l]), "h0Wrapper headingWrapper" === t) return (0, re.jsxs)(u.Box, { className: "preHeadingContent", children: [" ", n] }); var s = n; return (0, re.jsxs)(u.Box, { className: "sec", children: [(0, re.jsx)(u.Box, { display: "block", children: (0, re.jsxs)(u.Flex, { className: "headingFlex", alignItems: "baseline", children: [o && s.length > 0 ? (0, re.jsxs)(re.Fragment, { children: [(0, re.jsx)(g.IconButton, { className: "viewerHeadingButton", _focus: {}, _active: {}, "aria-label": "Expand heading", size: "xs", variant: "subtle", icon: (0, re.jsx)(V.ChevronUpIcon, {}), onClick: function () { return i(!o) }, height: 2, width: 2 }), (0, re.jsx)(g.IconButton, { className: "outlineHeadingButton", _focus: {}, _active: {}, "aria-label": "Expand heading", size: "xs", variant: "subtle", icon: (0, re.jsx)(bn.zOz, {}), onClick: function () { return i(!o) }, height: 2, width: 2 })] }) : (0, re.jsxs)(re.Fragment, { children: [(0, re.jsx)(g.IconButton, { className: "viewerHeadingButton", _active: {}, _focus: {}, "aria-label": "Collapse heading", height: 2, width: 2, size: "xs", variant: "subtle", icon: (0, re.jsx)(V.ChevronDownIcon, {}), onClick: function () { return i(!o) } }), (0, re.jsx)(g.IconButton, { className: "outlineHeadingButton", _active: {}, _focus: {}, "aria-label": "Collapse heading", height: 2, width: 2, size: "xs", variant: "subtle", icon: (0, re.jsx)(bn.O6Y, {}), onClick: function () { return i(!o) } })] }), s[0]] }) }), o && (0, re.jsx)(u.Box, { className: "sectionContent", children: s.slice(1) })] }) }; function mn(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function yn(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? mn(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : mn(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var Cn = function (e) { var n, t, r = e.nodeById, o = e.setSidebarHighlightedNode, l = e.setPreviewNode, s = e.previewText, c = e.nodeByCite, a = e.previewNode, d = e.openContextMenu, h = e.outline, g = e.collapse, p = e.linksByNodeId, x = e.macros, b = e.attachDir; if (!a || !p) return null; var j = Oe()().use(ke()).use(Be()).use(Le(), { idDir: b || void 0 }).use(Pe()).use(Ie(), { useSections: !0 }), m = (null === (n = p[null === a || void 0 === a ? void 0 : a.id]) || void 0 === n ? void 0 : n.reduce((function (e, n) { var t = Xt(n).filter((function (e) { return e !== a.id })).join(""); return yn(yn({}, e), {}, (0, i.Z)({}, t, r[t])) }), {})) || {}, y = Object.entries(m), C = Oe()().use(He()).use(Ye(), ["yaml"]).use(Ke()).use(We.Z, { permaLinks: Object.keys(m), pageResolver: function (e) { var n, t = y.find((function (n) { var t; return (null === n || void 0 === n || null === (t = n[1]) || void 0 === t ? void 0 : t.title) === e })); return [null !== (n = null === t || void 0 === t ? void 0 : t[0]) && void 0 !== n ? n : ""] }, hrefTemplate: function (e) { return "id:".concat(e) } }).use(Xe()).use(_e()).use(Me()).use(Qe()), O = ".md" === (null === a || void 0 === a || null === (t = a.file) || void 0 === t ? void 0 : t.slice(-3)), w = O ? C : j; console.log(x); var k = (0, v.useMemo)((function () { return w.use(Re(), { trust: function (e) { return ["\\htmlId", "\\href"].includes(e.command) }, macros: yn({ "\\eqref": "\\href{###1}{(\\text{#1})}", "\\ref": "\\href{###1}{\\text{#1}}", "\\label": "\\htmlId{#1}{}" }, x) }).use(ze(), { createElement: v.createElement, components: { a: function (e) { var n = e.children, t = e.href; return (0, re.jsx)(hn, { nodeByCite: c, setSidebarHighlightedNode: o, href: "".concat(t), nodeById: r, linksByNodeId: p, setPreviewNode: l, openContextMenu: d, outline: h, previewNode: a, isWiki: O, macros: x, attachDir: b, children: n }) }, img: function (e) { var n = e.src; return (0, re.jsx)(xn, { src: n, file: null === a || void 0 === a ? void 0 : a.file }) }, section: function (e) { var n = e.children, t = e.className; return t && t.slice(-1) === "".concat(a.level) ? (0, re.jsx)(u.Box, { children: n.slice(1) }) : (0, re.jsx)(vn, { outline: h, collapse: g, className: t, children: n }) }, blockquote: function (e) { var n = e.children; return (0, re.jsx)(f.m$.blockquote, { color: "gray.800", bgColor: "gray.300", pt: 4, pb: 2, mb: 4, mt: 3, pl: 4, borderLeftWidth: 4, borderLeftColor: "gray.700", children: n }) }, p: function (e) { var n = e.children; return (0, re.jsx)("p", { lang: "en", children: n }) } } }) }), [null === a || void 0 === a ? void 0 : a.id]), S = (0, v.useMemo)((function () { return k.processSync(s).result }), [s]); return (0, re.jsx)(jn.Provider, { value: { collapse: g, outline: h }, children: S }) }, On = function (e) { var n = e.openContextMenu, t = e.setSidebarHighlightedNode, r = e.nodeById, o = e.nodeByCite, i = e.previewNode, l = e.setPreviewNode, s = e.outline, c = e.collapse, a = e.linksByNodeId, d = e.macros, u = e.attachDir, h = (0, v.useState)(""), g = h[0], f = h[1], p = encodeURIComponent(encodeURIComponent(i.id)); return (0, v.useEffect)((function () { fetch("./notes/".concat(p)).then((function (e) { return e.ok ? e.text() : null })).then((function (e) { if (e) { if ("" === e) return "(empty node)"; f(e) } else f("") })).catch((function (e) { return f("(could not find node)"), console.log(e), "Could not fetch the text for some reason, sorry!\n\n This can happen because you have an id with forward slashes (/) in it." })) }), [i.id]), (0, re.jsx)(re.Fragment, { children: g && i && (0, re.jsx)(Cn, { nodeById: r, previewNode: i, setPreviewNode: l, previewText: g, nodeByCite: o, setSidebarHighlightedNode: t, openContextMenu: n, outline: s, collapse: c, linksByNodeId: a, attachDir: u, macros: d || {} }) }) }, wn = function (e) { var n, t = e.previewNode, r = e.setPreviewNode, o = e.setSidebarHighlightedNode, i = e.nodeById, s = e.linksByNodeId, c = e.nodeByCite, a = e.openContextMenu, d = e.outline, h = e.macros, g = e.attachDir, f = (null !== (n = s[null === t || void 0 === t ? void 0 : t.id]) && void 0 !== n ? n : []).filter((function (e) { var n = Xt(e), r = (0, l.Z)(n, 2), o = r[0]; r[1]; return o !== (null === t || void 0 === t ? void 0 : t.id) })).map((function (e) { return e.source })); return (0, re.jsxs)(u.Box, { className: "backlinks", borderRadius: "sm", mt: 6, p: 4, bg: "white", mb: 10, children: [(0, re.jsx)("p", { style: { fontSize: 16, fontWeight: 600 }, children: "Linked references (".concat(f.length, ")") }), (0, re.jsx)(u.VStack, { py: 2, spacing: 3, alignItems: "start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", color: "gray.800", children: (null === t || void 0 === t ? void 0 : t.id) && f.map((function (e) { var n, l, f; n = null === (l = i[e]) || void 0 === l ? void 0 : l.title; return (0, re.jsx)(u.Box, { overflow: "hidden", py: 1, borderRadius: "sm", width: "100%", children: (0, re.jsx)(hn, { linksByNodeId: s, nodeByCite: c, setSidebarHighlightedNode: o, href: "id:".concat(e), nodeById: i, previewNode: t, setPreviewNode: r, openContextMenu: a, outline: d, noUnderline: !0, attachDir: g, macros: h, children: null === (f = i[e]) || void 0 === f ? void 0 : f.title }) }, e) })) })] }) }; function kn(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Sn(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? kn(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : kn(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var In = function (e) { var n = e.setPreviewNode, t = e.justificationList, r = e.justification, o = e.previewNode, i = e.nodeById, l = e.nodeByCite, s = e.setSidebarHighlightedNode, c = e.linksByNodeId, a = e.openContextMenu, d = e.outline, h = e.collapse, g = e.macros, f = e.attachDir, p = d ? rn : tn; return (0, re.jsx)(u.Box, { pr: 8, pt: 2, height: "100%", className: "org", sx: Sn(Sn(Sn({}, on), p), {}, { textAlign: t[r] }), children: (null === o || void 0 === o ? void 0 : o.id) && (0, re.jsxs)(u.Flex, { className: "wrapClass", height: "100%", flexDirection: "column", justifyContent: "space-between", children: [(0, re.jsx)(On, { setPreviewNode: n, previewNode: o, nodeByCite: l, setSidebarHighlightedNode: s, openContextMenu: a, outline: d, collapse: h, nodeById: i, linksByNodeId: c, macros: g, attachDir: f }), (0, re.jsx)(wn, { setPreviewNode: n, previewNode: o, nodeById: i, linksByNodeId: c, nodeByCite: l, setSidebarHighlightedNode: s, openContextMenu: a, outline: d, attachDir: f, macros: g || {} })] }) }) }, Dn = function (e) { var n = e.previewNode; return (0, re.jsx)(u.Flex, { maxW: "90%", children: (0, re.jsx)(u.Heading, { lineHeight: 1.2, size: "md", fontWeight: 600, pt: 4, children: null === n || void 0 === n ? void 0 : n.title }) }) }, Pn = t(29119); function Nn(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Bn(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Nn(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Nn(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } function En(e, n) { var t, r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, o = Ln(e, null !== (t = r.storage) && void 0 !== t ? t : localStorage), i = o.get(), l = void 0 !== i ? i : n, s = null != i && "object" === typeof i && !1 === Array.isArray(i) ? Bn(Bn({}, n), i) : l; s !== i && o.update(s); var c = (0, v.useState)(s), a = c[0], d = c[1]; (0, v.useEffect)((function () { a !== s && d(s) }), [e]); var u = function (e) { e instanceof Function ? d((function (n) { var t = e(n); return o.update(t), t })) : (d(e), o.update(e)) }; return [a, u] } function Ln(e, n) { return { get: function () { var t = n.getItem(e); if (t && "undefined" !== t) return JSON.parse(t) }, update: function (t) { n.setItem(e, JSON.stringify(t)) }, remove: function () { n.removeItem(e) } } } var Tn = ["style"]; function Rn(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Fn(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Rn(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Rn(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var zn = function (e) { var n = e.isOpen, t = e.onOpen, r = e.onClose, o = e.previewNode, i = e.setPreviewNode, s = e.nodeById, c = e.linksByNodeId, a = e.nodeByCite, d = e.setSidebarHighlightedNode, h = e.canUndo, f = e.canRedo, p = e.resetPreviewNode, x = e.previousPreviewNode, b = e.nextPreviewNode, j = e.openContextMenu, m = (e.scope, e.setScope, e.windowWidth), y = e.filter, O = e.setFilter, w = e.tagColors, k = e.setTagColors, S = e.macros, I = e.attachDir, D = ((0, v.useContext)(nn.N).highlightColor, (0, v.useState)()), P = D[0], N = D[1], B = En("sidebarWidth", 400), E = (0, l.Z)(B, 2), L = E[0], T = E[1]; (0, v.useEffect)((function () { null !== o && void 0 !== o && o.id ? (t(), N(o)) : r() }), [null === o || void 0 === o ? void 0 : o.id]); var R = En("justification", 1), F = (0, l.Z)(R, 2), z = F[0], Z = F[1], H = En("outline", !1), A = (0, l.Z)(H, 2), M = A[0], W = A[1], V = (0, v.useState)("sans serif"), _ = (V[0], V[1]), G = (0, v.useState)(0), U = (G[0], G[1]), K = (0, v.useState)(!1), q = K[0], X = K[1]; return (0, re.jsx)(de, { animateOpacity: !1, dimension: "width", in: n, unmountOnExit: !0, startingSize: 0, style: { height: "100vh" }, children: (0, re.jsx)(Pn.e, { size: { height: "100vh", width: L }, onResizeStop: function (e, n, t, r) { T((function (e) { return e + r.width })) }, enable: { top: !1, right: !1, bottom: !1, left: !0, topRight: !1, bottomRight: !1, bottomLeft: !1, topLeft: !1 }, minWidth: "220px", maxWidth: m - 200, children: (0, re.jsxs)(u.Flex, { flexDir: "column", h: "100vh", pl: 2, color: "black", bg: "alt.100", width: "100%", children: [(0, re.jsxs)(u.Flex, { pl: 2, alignItems: "center", color: "black", width: "100%", children: [(0, re.jsx)(u.Flex, { pt: 1, flexShrink: 0, children: (0, re.jsx)(be, { setJustification: Z, setIndent: U, setFont: _, justification: z, setPreviewNode: i, canUndo: h, canRedo: f, resetPreviewNode: p, previousPreviewNode: x, nextPreviewNode: b, outline: M, setOutline: W, collapse: q, setCollapse: X }) }), (0, re.jsx)(u.Flex, { whiteSpace: "nowrap", textOverflow: "ellipsis", overflow: "hidden", onContextMenu: function (e) { e.preventDefault(), j(o, e) } }), (0, re.jsx)(u.Flex, { flexDir: "row", ml: "auto", children: (0, re.jsx)(g.IconButton, { m: 1, icon: (0, re.jsx)(C.T41, {}), "aria-label": "Options", variant: "subtle", onClick: function (e) { j(o, e, { left: void 0, top: 12, right: 20 - m, bottom: void 0 }) } }) })] }), (0, re.jsx)(ln.$B, { autoHide: !0, renderThumbVertical: function (e) { var n = e.style, t = (0, Y.Z)(e, Tn); return (0, re.jsx)(u.Box, Fn({ style: Fn(Fn({}, n), {}, { borderRadius: 0 }) }, t)) }, children: P && (0, re.jsxs)(u.VStack, { flexGrow: 1, alignItems: "left", bg: "alt.100", paddingLeft: 4, children: [(0, re.jsx)(Dn, { previewNode: P }), (0, re.jsx)(ye, { filter: y, setFilter: O, tagColors: w, setTagColors: k, openContextMenu: j, previewNode: o }), (0, re.jsx)(In, { setPreviewNode: i, previewNode: o, nodeById: s, nodeByCite: a, setSidebarHighlightedNode: d, justification: z, justificationList: ["justify", "start", "end", "center"], linksByNodeId: c, openContextMenu: j, outline: M, setOutline: W, collapse: q, macros: S, attachDir: I })] }) })] }) }) }) }, Zn = t(94090), Hn = t(88696), An = t(47647); function Mn(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Wn(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Mn(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Mn(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var Vn = function (e) { var n, t = e.filter, r = e.listName, o = e.labelFilter, l = e.displayName, s = e.setFilter, c = e.options, a = void 0 === c ? [] : c, d = (0, v.useContext)(nn.N).highlightColor, u = (null === a || void 0 === a ? void 0 : a.map((function (e) { return { value: e, label: o ? e.replace(o, "") : e } }))) || [], h = (0, v.useState)((null === (n = t[r]) || void 0 === n ? void 0 : n.map((function (e) { return { value: e, label: o ? null === e || void 0 === e ? void 0 : e.replace(o, "") : e } }))) || []), g = h[0], f = h[1]; return (0, re.jsx)(An.CUIAutoComplete, { labelStyleProps: { fontWeight: 300, fontSize: 14 }, items: u, label: "Add tag to ".concat(l), placeholder: " ", onCreateItem: function (e) { return null }, disableCreateItem: !0, selectedItems: g, onSelectedItemsChange: function (e) { e.selectedItems && (f(e.selectedItems), s(Wn(Wn({}, t), {}, (0, i.Z)({}, r, e.selectedItems.map((function (e) { return e.value })))))) }, listItemStyleProps: { overflow: "hidden" }, highlightItemBg: "gray.400", toggleButtonStyleProps: { variant: "outline" }, inputStyleProps: { mt: 2, height: 8, focusBorderColor: d, color: "gray.800", borderColor: "gray.500" }, tagStyleProps: { justifyContent: "flex-start", fontSize: 10, borderColor: d, borderWidth: 1, borderRadius: "md", color: d, bg: "", height: 4, mb: 2 }, hideToggleButton: !0, itemRenderer: function (e) { return e.label } }) }; function _n(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Gn(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? _n(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : _n(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var Yn = function (e) { var n = e.colorList, t = e.tagColors, r = e.setTagColors, o = e.highlightColor, l = e.tags.map((function (e) { return { value: e, label: e } })), s = (0, v.useState)(Object.keys(t).map((function (e) { return { value: e, label: e } }))), c = s[0], a = s[1]; return (0, re.jsxs)(u.Box, { children: [(0, re.jsx)(An.CUIAutoComplete, { items: l, labelStyleProps: { fontWeight: 300, fontSize: 14 }, label: "Add tag to color", placeholder: " ", disableCreateItem: !0, selectedItems: c, onSelectedItemsChange: function (e) { e.selectedItems && (a(Array.from(new Set(e.selectedItems))), r(Object.fromEntries(Array.from(new Set(e.selectedItems)).map((function (e) { var n; return [e.label, null !== (n = t[e.label]) && void 0 !== n ? n : "gray.600"] }))))) }, listItemStyleProps: { overflow: "hidden" }, highlightItemBg: "gray.400", toggleButtonStyleProps: { variant: "outline" }, inputStyleProps: { height: 8, focusBorderColor: o, color: "gray.800", borderColor: "gray.500" }, tagStyleProps: { display: "none", rounded: "full", bg: o, height: 8, paddingLeft: 4, fontWeight: "bold" }, hideToggleButton: !0, itemRenderer: function (e) { return e.label } }), (0, re.jsx)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", color: "gray.800", children: Object.keys(t).map((function (e) { return (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", width: "100%", pl: 2, children: [(0, re.jsx)(u.Box, { width: "100%", children: (0, re.jsx)(u.Text, { children: e }) }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, colorScheme: "", color: "black", children: (0, re.jsx)(u.Box, { bgColor: t[e], borderRadius: "sm", height: 6, width: 6 }) }), (0, re.jsx)(en.h_, { children: (0, re.jsx)(M.qy, { minW: 10, zIndex: "popover", bgColor: "gray.200", children: n.map((function (n) { return (0, re.jsx)(M.sN, { onClick: function () { return r(Gn(Gn({}, t), {}, (0, i.Z)({}, e, n))) }, justifyContent: "space-between", alignItems: "center", display: "flex", children: (0, re.jsx)(u.Box, { bgColor: n, borderRadius: "sm", height: 6, width: 6 }) }, n) })) }) })] }), (0, re.jsx)(g.IconButton, { "aria-label": "Delete tag color", variant: "ghost", icon: (0, re.jsx)(V.DeleteIcon, {}), onClick: function () { r(Object.fromEntries(Array.from(new Set(c)).map((function (e) { var n; return [e.label, null !== (n = t[e.label]) && void 0 !== n ? n : "gray.600"] })))), a(c.filter((function (n) { return n.value !== e }))) } })] }, e) })) })] }) }, Un = t(80918), Kn = function (e) { var n = e.infoText; return (0, re.jsx)(u.Box, { paddingLeft: "1", children: (0, re.jsx)(h.u, { label: n, placement: "top", color: "gray.100", bg: "gray.800", hasArrow: !0, children: (0, re.jsx)(V.InfoOutlineIcon, {}) }) }) }, qn = ["min", "max", "step", "value"], Xn = function (e) { var n = e.min, t = void 0 === n ? 0 : n, r = e.max, o = void 0 === r ? 10 : r, i = e.step, l = void 0 === i ? .1 : i, s = e.value, c = void 0 === s ? 1 : s, a = (0, Y.Z)(e, qn), d = a.onChange, g = a.label, f = a.infoText, p = (0, v.useContext)(nn.N).highlightColor; return (0, re.jsxs)(u.Box, { pt: 1, pb: 2, children: [(0, re.jsxs)(u.Box, { display: "flex", alignItems: "flex-end", mb: 2, children: [(0, re.jsx)(u.Text, { children: g }), f && (0, re.jsx)(Kn, { infoText: f })] }), (0, re.jsxs)(Un.iR, { value: c, onChange: d, min: t, max: o, step: l, children: [(0, re.jsx)(Un.Uj, { children: (0, re.jsx)(Un.Ms, {}) }), (0, re.jsx)(h.u, { bg: p, label: c.toFixed(1), children: (0, re.jsx)(Un.gs, { bg: "white" }) })] })] }, g) }, Jn = (0, v.createContext)({ subDirs: ["dailies", ".attach"], attachDir: ".attach", roamDir: "~/org", dailyDir: "dailies" }); function Qn(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function $n(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Qn(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Qn(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var et = function (e) { var n = e.filter, t = e.setFilter, r = e.local, o = e.setLocal, i = e.tagColors, l = e.setTagColors, s = e.highlightColor, c = e.colorList, a = e.tags, d = (0, v.useContext)(Jn), h = d.roamDir, f = d.subDirs; return (0, re.jsxs)(u.Box, { children: [(0, re.jsxs)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", paddingLeft: 7, color: "gray.800", children: [(0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Link children to" }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), colorScheme: "", color: "black", size: "sm", children: function () { switch (n.parent) { case "parent": return (0, re.jsx)(u.Text, { children: "File" }); case "heading": return (0, re.jsx)(u.Text, { children: "Heading" }); default: return (0, re.jsx)(u.Text, { children: "Nothing" }) } }() }), (0, re.jsx)(en.h_, { children: (0, re.jsxs)(M.qy, { bgColor: "gray.200", zIndex: "popover", children: [(0, re.jsx)(M.sN, { onClick: function () { return t((function (e) { return $n($n({}, e), {}, { parent: "" }) })) }, children: "Nothing" }), (0, re.jsx)(M.sN, { onClick: function () { return t((function (e) { return $n($n({}, e), {}, { parent: "parent" }) })) }, children: "Parent file node" }), (0, re.jsx)(M.sN, { onClick: function () { return t((function (e) { return $n($n({}, e), {}, { parent: "heading" }) })) }, children: "Next highest heading node" })] }) })] })] }), (0, re.jsxs)(u.Flex, { justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Orphans" }), (0, re.jsx)(Hn.r, { onChange: function () { t((function (e) { return $n($n({}, e), {}, { orphans: !e.orphans }) })) }, isChecked: n.orphans })] }), (0, re.jsxs)(u.Flex, { justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Dailies" }), (0, re.jsx)(Hn.r, { onChange: function () { t((function (e) { return $n($n({}, e), {}, { dailies: !e.dailies }) })) }, isChecked: n.dailies })] }), (0, re.jsxs)(u.Flex, { justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Org-noter pages" }), (0, re.jsx)(Hn.r, { onChange: function () { t((function (e) { return $n($n({}, e), {}, { noter: !e.noter }) })) }, isChecked: n.noter })] }), (0, re.jsxs)(u.Flex, { justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Citations without note files" }), (0, re.jsx)(Hn.r, { onChange: function () { t($n($n({}, n), {}, { filelessCites: !n.filelessCites })) }, isChecked: n.filelessCites })] }), (0, re.jsxs)(u.Flex, { justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Non-existent nodes" }), (0, re.jsx)(Hn.r, { onChange: function () { l($n($n({}, i), {}, { bad: "white" })), t($n($n({}, n), {}, { bad: !n.bad })) }, isChecked: n.bad })] }), (0, re.jsx)(Xn, { label: "Number of neighbors in local graph", value: r.neighbors, onChange: function (e) { return o($n($n({}, r), {}, { neighbors: e })) }, min: 1, max: 5, step: 1 })] }), (0, re.jsxs)(Zn.UQ, { padding: 0, allowToggle: !0, allowMultiple: !0, paddingLeft: 3, children: [(0, re.jsxs)(Zn.Qd, { children: [(0, re.jsxs)(Zn.KF, { children: ["Directory filters", (0, re.jsx)(Zn.XE, {})] }), (0, re.jsxs)(Zn.Hk, { pr: 0, mr: 0, children: [(0, re.jsx)(Vn, { filter: n, setFilter: t, options: f, displayName: "directory blocklist", listName: "dirsBlocklist", labelFilter: h }), (0, re.jsx)(Vn, { filter: n, setFilter: t, options: f, displayName: "directory allowlist", listName: "dirsAllowlist", labelFilter: h })] })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsxs)(Zn.KF, { children: ["Tag filters", (0, re.jsx)(Zn.XE, {})] }), (0, re.jsxs)(Zn.Hk, { pr: 0, mr: 0, children: [(0, re.jsx)(Vn, { filter: n, setFilter: t, options: a, displayName: "tag blocklist", listName: "tagsBlacklist" }), (0, re.jsx)(Vn, { filter: n, setFilter: t, options: a, displayName: "tag allowlist", listName: "tagsWhitelist" })] })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsxs)(Zn.KF, { children: ["Tag colors", (0, re.jsx)(Zn.XE, {})] }), (0, re.jsx)(Zn.Hk, { pr: 0, mr: 0, children: (0, re.jsx)(Yn, { tags: a, colorList: c, tagColors: i, setTagColors: l, highlightColor: s }) })] })] })] }) }, nt = t(37496), tt = function (e) { var n = e.value, t = e.onChange, r = e.label, o = e.infoText, i = e.children; return (0, re.jsxs)(u.Box, { paddingTop: 2, children: [(0, re.jsxs)(u.Box, { display: "flex", justifyContent: "space-between", paddingBottom: 2, children: [(0, re.jsxs)(u.Box, { display: "flex", alignItems: "center", children: [(0, re.jsx)(u.Text, { children: r }), o && (0, re.jsx)(Kn, { infoText: o })] }), (0, re.jsx)(Hn.r, { isChecked: !!n, onChange: t })] }), (0, re.jsx)(nt.UO, { in: !!n, animateOpacity: !0, children: (0, re.jsx)(u.Box, { paddingLeft: 4, paddingTop: 2, paddingBottom: 2, children: i }) })] }, r) }; function rt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function ot(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? rt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : rt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var it = function (e) { var n = e.physics, t = e.setPhysics, r = (0, v.useCallback)((function (e, n, r) { t((function (t) { return ot(ot({}, t), {}, (0, i.Z)({}, n, e / r)) })) }), []); return (0, re.jsxs)(u.Box, { children: [(0, re.jsxs)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", paddingLeft: 7, color: "gray.800", children: [(0, re.jsxs)(tt, { label: "Gravity", value: n.gravityOn, onChange: function () { return t(ot(ot({}, n), {}, { gravityOn: !n.gravityOn })) }, children: [(0, re.jsxs)(u.Flex, { justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Also in local" }), (0, re.jsx)(Hn.r, { onChange: function () { t((function (e) { return ot(ot({}, e), {}, { gravityLocal: !e.gravityLocal }) })) }, isChecked: n.gravityLocal })] }), (0, re.jsx)(Xn, { label: "Strength", value: 10 * n.gravity, onChange: function (e) { return r(e, "gravity", 10) } })] }), (0, re.jsx)(Xn, { value: -n.charge / 100, onChange: function (e) { return r(e, "charge", -.01) }, label: "Repulsive Force" }), (0, re.jsx)(Xn, { value: 5 * n.linkStrength, onChange: function (e) { return r(e, "linkStrength", 5) }, label: "Link Force" }), (0, re.jsx)(Xn, { label: "Stabilization rate", value: 50 * n.alphaDecay, onChange: function (e) { return r(e, "alphaDecay", 50) } })] }), (0, re.jsx)(u.Box, { children: (0, re.jsx)(Zn.UQ, { paddingLeft: 3, allowToggle: !0, children: (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsxs)(Zn.KF, { children: [(0, re.jsx)(u.Text, { children: "Advanced" }), (0, re.jsx)(Zn.XE, { marginRight: 2 })] }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsxs)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", paddingLeft: 3, color: "gray.800", children: [(0, re.jsx)(tt, { label: "Collision", infoText: "Perfomance sap, disable if slow", value: n.collision, onChange: function () { return t(ot(ot({}, n), {}, { collision: !n.collision })) }, children: (0, re.jsx)(Xn, { value: n.collisionStrength / 5, onChange: function (e) { return r(e, "collisionStrength", .2) }, label: "Collision Radius", infoText: "Easy with this one, high values can lead to a real jiggly mess" }) }), (0, re.jsx)(Xn, { label: "Link iterations", value: n.linkIts, onChange: function (e) { return r(e, "linkIts", 1) }, min: 0, max: 6, step: 1, infoText: "How many links down the line the physics of a single node affects (Slow)" }), (0, re.jsx)(Xn, { label: "Viscosity", value: 10 * n.velocityDecay, onChange: function (e) { return r(e, "velocityDecay", 10) } }), (0, re.jsx)(tt, { label: "Center nodes", value: n.centering, onChange: function () { return t(ot(ot({}, n), {}, { centering: !n.centering })) }, infoText: "Keeps the nodes in the center of the viewport. If disabled you can drag the nodes anywhere you want.", children: (0, re.jsx)(Xn, { label: "Centering Strength", value: n.centeringStrength, max: 2, step: .01, onChange: function (e) { return r(e, "centeringStrength", 1) } }) })] }) })] }) }) })] }) }; function lt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function st(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? lt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : lt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var ct = function (e) { var n = e.behavior, t = e.setBehavior, r = e.mouse, o = e.setMouse; return (0, re.jsxs)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", paddingLeft: 7, color: "gray.800", children: [(0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Preview node" }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), colorScheme: "", color: "black", children: (0, re.jsx)(u.Text, { children: r.preview ? r.preview[0].toUpperCase() + r.preview.slice(1) : "Never" }) }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsxs)(M.qy, { bgColor: "gray.200", zIndex: "popover", children: [(0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { preview: "" })) }, children: "Never" }), (0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { preview: "click" })) }, children: "Click" }), (0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { preview: "double" })) }, children: "Double Click" })] })] })] })] }), (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsxs)(u.Flex, { children: [(0, re.jsx)(u.Text, { children: "Expand Node" }), (0, re.jsx)(Kn, { infoText: "View only the node and its direct neighbors" })] }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), colorScheme: "", color: "black", children: (0, re.jsx)(u.Text, { children: r.local ? r.local[0].toUpperCase() + r.local.slice(1) : "Never" }) }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsxs)(M.qy, { zIndex: "popover", bgColor: "gray.200", children: [(0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { local: "" })) }, children: "Never" }), (0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { local: "click" })) }, children: "Click" }), (0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { local: "double" })) }, children: "Double Click" }), (0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { local: "right" })) }, children: "Right Click" })] })] })] })] }), (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Open in Emacs" }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), colorScheme: "", color: "black", children: (0, re.jsx)(u.Text, { children: r.follow ? r.follow[0].toUpperCase() + r.follow.slice(1) : "Never" }) }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsxs)(M.qy, { bgColor: "gray.200", zIndex: "popover", children: [(0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { follow: "" })) }, children: "Never" }), (0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { follow: "click" })) }, children: "Click" }), (0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { follow: "double" })) }, children: "Double Click" }), (0, re.jsx)(M.sN, { onClick: function () { return o(st(st({}, r), {}, { follow: "right" })) }, children: "Right Click" })] })] })] })] }), (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Follow Emacs by..." }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), colorScheme: "", color: "black", children: (0, re.jsx)(u.Text, { children: n.follow[0].toUpperCase() + n.follow.slice(1) }) }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsxs)(M.qy, { bgColor: "gray.200", zIndex: "popover", children: [(0, re.jsx)(M.sN, { onClick: function () { return t(st(st({}, n), {}, { follow: "color" })) }, children: "Just coloring the currently opened node" }), (0, re.jsx)(M.sN, { onClick: function () { return t(st(st({}, n), {}, { follow: "local" })) }, children: "Opening the local graph" }), (0, re.jsx)(M.sN, { onClick: function () { return t(st(st({}, n), {}, { follow: "zoom" })) }, children: "Zooming to the current node" })] })] })] })] }), (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsxs)(u.Flex, { children: [(0, re.jsx)(u.Text, { children: "Local graph" }), (0, re.jsx)(Kn, { infoText: "When in local mode and clicking a new node, should I add that node's local graph or open the new one?" })] }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), colorScheme: "", color: "black", children: (0, re.jsx)(u.Text, { children: "add" === n.localSame ? "Add" : "Replace" }) }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsxs)(M.qy, { bgColor: "gray.200", zIndex: "popover", children: [(0, re.jsx)(M.sN, { onClick: function () { return t(st(st({}, n), {}, { localSame: "replace" })) }, children: "Open that nodes graph" }), (0, re.jsx)(M.sN, { onClick: function () { return t(st(st({}, n), {}, { localSame: "add" })) }, children: "Add node to local graph" })] })] })] })] }), (0, re.jsx)(Xn, { label: "Zoom speed", value: n.zoomSpeed, min: 0, max: 4e3, step: 100, onChange: function (e) { return t(st(st({}, n), {}, { zoomSpeed: e })) } }), (0, re.jsx)(Xn, { label: "Zoom padding", value: n.zoomPadding, min: 0, max: 400, step: 1, onChange: function (e) { return t(st(st({}, n), {}, { zoomPadding: e })) }, infoText: "How much to zoom out to accomodate all nodes when changing the view." })] }) }, at = t(11391); function dt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function ut(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? dt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : dt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var ht = function (e) { var n = e.visuals, t = e.setVisuals; return (0, re.jsx)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", color: "gray.800", children: (0, re.jsx)(u.Box, { children: (0, re.jsx)(tt, { label: "Highlight", onChange: function () { return t((function (e) { return ut(ut({}, e), {}, { highlight: !e.highlight }) })) }, value: n.highlight, children: (0, re.jsxs)(u.VStack, { spacing: 1, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.400" }), align: "stretch", paddingLeft: 0, children: [(0, re.jsx)(Xn, { label: "Highlight Link Thickness", value: n.highlightLinkSize, onChange: function (e) { return t((function (n) { return ut(ut({}, n), {}, { highlightLinkSize: e }) })) } }), (0, re.jsx)(Xn, { label: "Highlight Node Size", value: n.highlightNodeSize, onChange: function (e) { return t((function (n) { return ut(ut({}, n), {}, { highlightNodeSize: e }) })) } }), (0, re.jsx)(Xn, { min: 0, max: 1, label: "Highlight Fade", value: n.highlightFade, onChange: function (e) { return t((function (n) { return ut(ut({}, n), {}, { highlightFade: e }) })) } }), (0, re.jsxs)(tt, { label: "Highlight Animation", onChange: function () { t((function (e) { return ut(ut({}, e), {}, { highlightAnim: !e.highlightAnim }) })) }, value: n.highlightAnim, children: [(0, re.jsx)(Xn, { label: "Animation speed", onChange: function (e) { return t((function (n) { return ut(ut({}, n), {}, { animationSpeed: e }) })) }, value: n.animationSpeed, infoText: "Slower speed has a chance of being buggy", min: 50, max: 1e3, step: 10 }), (0, re.jsx)(at.Ph, { placeholder: n.algorithmName, onChange: function (e) { t((function (n) { return ut(ut({}, n), {}, { algorithmName: e.target.value }) })) }, children: n.algorithmOptions.map((function (e) { return (0, re.jsx)("option", { value: e, children: e }, e) })) })] })] }) }) }) }) }; function gt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function ft(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? gt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : gt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var pt = function (e) { var n = e.label, t = e.colorList, r = e.value, o = e.visValue, l = e.setVisuals, s = e.noEmpty, c = (0, v.useCallback)((function (e) { return l((function (n) { return ft(ft({}, n), {}, (0, i.Z)({}, r, e)) })) }), []); return (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: n }), (0, re.jsxs)($e.J2, { isLazy: !0, placement: "right", children: [(0, re.jsx)($e.xo, { children: (0, re.jsx)(g.Button, { colorScheme: "", color: "black", rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), children: (0, re.jsx)(u.Box, { bgColor: o, borderRadius: "sm", height: 6, width: 6 }) }) }), (0, re.jsx)(en.h_, { children: (0, re.jsx)($e.yk, { zIndex: "tooltip", maxW: 36, position: "relative", children: (0, re.jsxs)(u.Flex, { flexWrap: "wrap", bgColor: "gray.200", children: [!s && (0, re.jsx)(u.Box, { onClick: function () { return c("") }, justifyContent: "space-between", alignItems: "center", display: "flex", m: 1, children: (0, re.jsx)(u.Box, { height: 6, width: 6, borderColor: "gray.600", borderRadius: "xl", borderWidth: 1 }) }), t.map((function (e) { return (0, re.jsx)(u.Box, { m: 1, onClick: function () { return c(e) }, justifyContent: "space-between", alignItems: "center", display: "flex", children: (0, re.jsx)(u.Box, { bgColor: e, borderRadius: "xl", height: 6, width: 6 }) }, e) }))] }) }) })] })] }) }; function xt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function bt(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? xt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : xt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var jt = function (e) { var n = e.visuals, t = e.setVisualsCallback, r = e.highlightColor, i = e.setHighlightColor; return (0, re.jsx)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", color: "gray.800", children: (0, re.jsxs)(u.Box, { children: [(0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Nodes" }), (0, re.jsx)(h.u, { label: "Shuffle node colors", children: (0, re.jsx)(g.IconButton, { "aria-label": "Shuffle node colors", size: "sm", icon: (0, re.jsx)(V.RepeatIcon, {}), variant: "ghost", onClick: function () { var e, r = null !== (e = n.nodeColorScheme) && void 0 !== e ? e : []; t(bt(bt({}, n), {}, { nodeColorScheme: r.map((function (e) { return [Math.random(), e] })).sort((function (e, n) { return (0, l.Z)(e, 1)[0] - (0, l.Z)(n, 1)[0] })).map((function (e) { var n = (0, l.Z)(e, 2); n[0]; return n[1] })) })) } }) }), (0, re.jsx)(h.u, { label: "Cycle node colors", children: (0, re.jsx)(g.IconButton, { "aria-label": "Shift node colors", icon: (0, re.jsx)(V.ArrowRightIcon, {}), size: "sm", variant: "ghost", onClick: function () { var e, r = null !== (e = n.nodeColorScheme) && void 0 !== e ? e : []; t(bt(bt({}, n), {}, { nodeColorScheme: [].concat((0, o.Z)(r.slice(1, r.length)), [r[0]]) })) } }) }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", closeOnSelect: !1, matchWidth: !0, children: [(0, re.jsx)(M.j2, { width: 20, as: g.Button, colorScheme: "", color: "black", rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), children: (0, re.jsx)(u.Flex, { height: 6, width: 6, flexDirection: "column", flexWrap: "wrap", children: n.nodeColorScheme.map((function (e) { return (0, re.jsx)(u.Box, { bgColor: e, flex: "1 1 8px", borderRadius: "2xl" }, e) })) }) }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsx)(M.qy, { minW: 10, zIndex: "popover", bgColor: "gray.200", children: (0, re.jsx)(M.__, { width: 500, type: "checkbox", defaultValue: n.nodeColorScheme, onChange: function (e) { e.length && t(bt(bt({}, n), {}, { nodeColorScheme: e })) }, children: A.map((function (e) { return (0, re.jsx)(M.ii, { isChecked: n.nodeColorScheme.some((function (n) { return n === e })), value: e, isDisabled: 1 === n.nodeColorScheme.length && n.nodeColorScheme[0] === e, children: (0, re.jsx)(u.Box, { justifyContent: "space-between", alignItems: "center", display: "flex", children: (0, re.jsx)(u.Box, { bgColor: e, borderRadius: "sm", height: 6, width: 6 }) }) }, e) })) }) })] })] })] }), (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Links" }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, colorScheme: "", color: "black", rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), children: (0, re.jsx)(u.Box, { children: n.linkColorScheme ? (0, re.jsx)(u.Box, { bgColor: n.linkColorScheme, borderRadius: "sm", height: 6, width: 6 }) : (0, re.jsx)(u.Flex, { height: 6, width: 6, flexDirection: "column", flexWrap: "wrap", children: n.nodeColorScheme.map((function (e) { return (0, re.jsx)(u.Box, { bgColor: e, flex: "1 1 8px", borderRadius: "2xl" }, e) })) }) }) }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsxs)(M.qy, { minW: 10, zIndex: "popover", bgColor: "gray.200", children: [(0, re.jsx)(M.sN, { onClick: function () { return t(bt(bt({}, n), {}, { linkColorScheme: "" })) }, justifyContent: "space-between", alignItems: "center", display: "flex", children: (0, re.jsx)(u.Flex, { height: 6, width: 6, flexDirection: "column", flexWrap: "wrap", children: n.nodeColorScheme.map((function (e) { return (0, re.jsx)(u.Box, { bgColor: e, flex: "1 1 8px", borderRadius: "2xl" }, e) })) }) }), A.map((function (e) { return (0, re.jsx)(M.sN, { onClick: function () { return t(bt(bt({}, n), {}, { linkColorScheme: e })) }, justifyContent: "space-between", alignItems: "center", display: "flex", children: (0, re.jsx)(u.Box, { bgColor: e, borderRadius: "sm", height: 6, width: 6 }) }, e) }))] })] })] })] }), (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Accent" }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, colorScheme: "", color: "black", rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), children: (0, re.jsx)(u.Box, { bgColor: r, borderRadius: "sm", height: 6, width: 6 }) }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsx)(M.qy, { minW: 10, zIndex: "popover", bgColor: "gray.200", children: A.map((function (e) { return (0, re.jsx)(M.sN, { onClick: function () { return i(e) }, justifyContent: "space-between", alignItems: "center", display: "flex", children: (0, re.jsx)(u.Box, { bgColor: e, borderRadius: "sm", height: 6, width: 6 }) }, e) })) })] })] })] }), (0, re.jsx)(pt, { colorList: A, label: "Link highlight", setVisuals: t, value: "linkHighlight", visValue: n.linkHighlight }), (0, re.jsx)(pt, { colorList: A, label: "Node highlight", setVisuals: t, value: "nodeHighlight", visValue: n.nodeHighlight }), (0, re.jsx)(pt, { colorList: A, label: "Background", setVisuals: t, value: "backgroundColor", visValue: n.backgroundColor }), (0, re.jsx)(pt, { colorList: A, label: "Emacs node", setVisuals: t, value: "emacsNodeColor", visValue: n.emacsNodeColor })] }) }) }; function vt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function mt(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? vt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : vt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var yt = function (e) { var n = e.visuals, t = e.setVisuals, r = e.threeDim; return (0, re.jsx)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", color: "gray.800", children: (0, re.jsxs)(u.Box, { children: [(0, re.jsx)(Xn, { label: "Node size", value: n.nodeRel, onChange: function (e) { return t(mt(mt({}, n), {}, { nodeRel: e })) } }), (0, re.jsx)(Xn, { label: "Node degree size multiplier", value: n.nodeSizeLinks, min: 0, max: 2, onChange: function (e) { return t(mt(mt({}, n), {}, { nodeSizeLinks: e })) } }), (0, re.jsx)(Xn, { label: "Node zoom invariance", value: n.nodeZoomSize, min: 0, max: 2, infoText: "How much the graph will try to keep the nodesize consistent across zoom scales. 0 is no consistency, node will always be their true size, 1 is linear, 2 is quadratic.", onChange: function (e) { return t((function (n) { return mt(mt({}, n), {}, { nodeZoomSize: e }) })) } }), r && (0, re.jsxs)(re.Fragment, { children: [(0, re.jsx)(Xn, { label: "Node opacity", value: n.nodeOpacity, min: 0, max: 1, onChange: function (e) { return t(mt(mt({}, n), {}, { nodeOpacity: e })) } }), (0, re.jsx)(Xn, { label: "Node resolution", value: n.nodeResolution, min: 5, max: 32, step: 1, onChange: function (e) { return t(mt(mt({}, n), {}, { nodeResolution: e })) } })] }), (0, re.jsx)(Xn, { label: "Link width", value: n.linkWidth, onChange: function (e) { return t(mt(mt({}, n), {}, { linkWidth: e })) } }), r && (0, re.jsx)(Xn, { label: "Link opacity", min: 0, max: 1, value: n.linkOpacity, onChange: function (e) { return t(mt(mt({}, n), {}, { linkOpacity: e })) } }), (0, re.jsxs)(tt, { label: "Link arrows", value: n.arrows, onChange: function () { return t(mt(mt({}, n), {}, { arrows: !n.arrows })) }, children: [(0, re.jsx)(Xn, { label: "Arrow size", value: n.arrowsLength / 10, onChange: function (e) { return t(mt(mt({}, n), {}, { arrowsLength: 10 * e })) } }), (0, re.jsx)(Xn, { label: "Arrow Position", value: n.arrowsPos, min: 0, max: 1, step: .01, onChange: function (e) { return t(mt(mt({}, n), {}, { arrowsPos: e })) } }), (0, re.jsx)(pt, { colorList: A, label: "Arrow Color", setVisuals: t, value: "arrowsColor", visValue: n.arrowsColor }, "arrow")] }), (0, re.jsxs)(tt, { label: "Directional Particles", value: n.particles, onChange: function () { return t(mt(mt({}, n), {}, { particles: !n.particles })) }, children: [(0, re.jsx)(Xn, { label: "Particle Number", value: n.particlesNumber, max: 5, step: 1, onChange: function (e) { return t(mt(mt({}, n), {}, { particlesNumber: e })) } }), (0, re.jsx)(Xn, { label: "Particle Size", value: n.particlesWidth, onChange: function (e) { return t(mt(mt({}, n), {}, { particlesWidth: e })) } })] })] }) }) }; function Ct(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Ot(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Ct(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Ct(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var wt = function (e) { var n = e.visuals, t = e.setVisuals; return (0, re.jsxs)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.400" }), align: "stretch", color: "gray.800", children: [(0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", children: [(0, re.jsx)(u.Text, { children: "Show labels" }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, colorScheme: "", color: "black", rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), children: n.labels ? n.labels < 2 ? "On Highlight" : "Always" : "Never" }), (0, re.jsxs)(en.h_, { children: [" ", (0, re.jsxs)(M.qy, { zIndex: "popover", bgColor: "gray.200", children: [(0, re.jsx)(M.sN, { onClick: function () { return t(Ot(Ot({}, n), {}, { labels: 0 })) }, children: "Never" }), (0, re.jsx)(M.sN, { onClick: function () { return t(Ot(Ot({}, n), {}, { labels: 1 })) }, children: "On Highlight" }), (0, re.jsx)(M.sN, { onClick: function () { return t(Ot(Ot({}, n), {}, { labels: 2 })) }, children: "Always" }), (0, re.jsx)(M.sN, { onClick: function () { return t(Ot(Ot({}, n), {}, { labels: 3 })) }, children: "Always (even in 3D)" })] })] })] })] }), (0, re.jsxs)(nt.UO, { in: n.labels > 1, animateOpacity: !0, children: [(0, re.jsx)(u.Box, { paddingTop: 2, children: (0, re.jsx)(Xn, { label: "Label Appearance Scale", value: 2 * n.labelScale, onChange: function (e) { return t(Ot(Ot({}, n), {}, { labelScale: e / 2 })) } }) }), (0, re.jsxs)(u.Box, { paddingTop: 2, children: [(0, re.jsx)(Xn, { label: "Label dynamicity", infoText: "By default, labels of nodes with more links will appear earlier than those with fewer. This slider changes the strength of this effect, put it at zero to disable it.", value: n.labelDynamicStrength, min: 0, max: 1, step: .05, onChange: function (e) { return t((function (n) { return Ot(Ot({}, n), {}, { labelDynamicStrength: e }) })) } }), (0, re.jsx)(nt.UO, { in: n.labelDynamicStrength > 0, children: (0, re.jsx)(Xn, { label: "Dynamic zoom degree cap", infoText: "The maximum number of links that is considered for the 'dynamic zoom effect'. Past this number all number of links are treated the same.", value: n.labelDynamicDegree, min: 1, max: 15, step: 1, onChange: function (e) { return t((function (n) { return Ot(Ot({}, n), {}, { labelDynamicDegree: e }) })) } }) })] })] }), (0, re.jsx)(pt, { colorList: A, label: "Text", setVisuals: t, value: "labelTextColor", visValue: n.labelTextColor }), (0, re.jsxs)(u.Box, { children: [(0, re.jsx)(pt, { colorList: A, label: "Background", setVisuals: t, value: "labelBackgroundColor", visValue: n.labelBackgroundColor }), (0, re.jsx)(nt.UO, { in: !!n.labelBackgroundColor, animateOpacity: !0, children: (0, re.jsx)(u.Box, { paddingTop: 2, children: (0, re.jsx)(Xn, { label: "Background opacity", value: n.labelBackgroundOpacity, onChange: function (e) { console.log(n.labelBackgroundOpacity), t(Ot(Ot({}, n), {}, { labelBackgroundOpacity: e })) }, min: 0, max: 1, step: .01 }) }) })] }), (0, re.jsx)(Xn, { label: "Label font size", value: n.labelFontSize, min: 5, max: 20, step: .5, onChange: function (e) { return t(Ot(Ot({}, n), {}, { labelFontSize: e })) } }), (0, re.jsx)(Xn, { label: "Max. label characters", value: n.labelLength, min: 10, max: 100, step: 1, onChange: function (e) { return t(Ot(Ot({}, n), {}, { labelLength: e })) } }), (0, re.jsx)(Xn, { label: "Max. label line length", value: n.labelWordWrap, min: 10, max: 100, step: 1, onChange: function (e) { return t(Ot(Ot({}, n), {}, { labelWordWrap: e })) } }), (0, re.jsx)(Xn, { label: "Space between label lines", value: n.labelLineSpace, min: .2, max: 3, step: .1, onChange: function (e) { return t(Ot(Ot({}, n), {}, { labelLineSpace: e })) } })] }) }, kt = t(67690), St = function () { var e = (0, v.useContext)(nn.N), n = e.emacsTheme, t = e.setEmacsTheme; e.highlightColor; return (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", pl: 7, pr: 2, children: [(0, re.jsx)(u.Text, { children: "Theme" }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "bottom", closeOnSelect: !1, children: [(0, re.jsx)(M.j2, { as: g.Button, size: "sm", colorScheme: "", color: "black", rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), children: n[0] }), (0, re.jsxs)(M.qy, { minW: 10, zIndex: "popover", bgColor: "gray.200", children: [(0, re.jsx)(M.sN, { onClick: function () { return "" }, justifyContent: "space-between", alignItems: "center", display: "flex", children: (0, re.jsx)(u.Box, { height: 6, width: 6 }) }), Object.keys(kt.n).map((function (e, n) { return (0, re.jsxs)(M.sN, { onClick: function () { return t([e, kt.n[e]]) }, justifyContent: "space-between", alignItems: "center", display: "flex", children: [(0, re.jsx)(u.Text, { children: e }), (0, re.jsx)(u.Flex, { height: 6, width: 20, flexDirection: "column", flexWrap: "wrap", children: Object.values(kt.n[e]).map((function (e) { return (0, re.jsx)(u.Box, { bgColor: e, flex: "1 1 8px" }, e) })) })] }, e) }))] })] })] }) }; function It(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Dt(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? It(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : It(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var Pt = function (e) { var n = e.visuals, t = e.setVisuals; return (0, re.jsx)(u.VStack, { spacing: 2, justifyContent: "flex-start", divider: (0, re.jsx)(u.StackDivider, { borderColor: "gray.500" }), align: "stretch", color: "gray.800", children: (0, re.jsxs)(u.Box, { children: [(0, re.jsxs)(tt, { label: "Dash cite links", infoText: "Add dashes to citation links made with org-roam-bibtex", value: n.citeDashes, onChange: function () { return t(Dt(Dt({}, n), {}, { citeDashes: !n.citeDashes })) }, children: [(0, re.jsx)(Xn, { label: "Dash length", value: n.citeDashLength / 10, onChange: function (e) { return t(Dt(Dt({}, n), {}, { citeDashLength: 10 * e })) } }), (0, re.jsx)(Xn, { label: "Gap length", value: n.citeGapLength / 5, onChange: function (e) { return t(Dt(Dt({}, n), {}, { citeGapLength: 5 * e })) } })] }), (0, re.jsx)(pt, { colorList: A, label: "Citation node color", setVisuals: t, value: "citeNodeColor", visValue: n.citeNodeColor }), (0, re.jsx)(pt, { colorList: A, label: "Citation link color", setVisuals: t, value: "citeLinkColor", visValue: n.citeLinkColor }), (0, re.jsx)(pt, { colorList: A, label: "Reference link highlight", setVisuals: t, value: "citeLinkHighlightColor", visValue: n.citeLinkHighlightColor }), (0, re.jsxs)(tt, { label: "Dash ref links", infoText: "Add dashes to citation links, whose target has a note, made with org-roam-bibtex", value: n.refDashes, onChange: function () { return t(Dt(Dt({}, n), {}, { refDashes: !n.refDashes })) }, children: [(0, re.jsx)(Xn, { label: "Dash length", value: n.refDashLength / 10, onChange: function (e) { return t(Dt(Dt({}, n), {}, { refDashLength: 10 * e })) } }), (0, re.jsx)(Xn, { label: "Gap length", value: n.refGapLength / 5, onChange: function (e) { return t(Dt(Dt({}, n), {}, { refGapLength: 5 * e })) } })] }), (0, re.jsx)(pt, { colorList: A, label: "Reference node color", setVisuals: t, value: "refNodeColor", visValue: n.refNodeColor }), (0, re.jsx)(pt, { colorList: A, label: "Reference link color", setVisuals: t, value: "refLinkColor", visValue: n.refLinkColor }), (0, re.jsx)(pt, { colorList: A, label: "Reference link highlight", setVisuals: t, value: "refLinkHighlightColor", visValue: n.refLinkHighlightColor })] }) }) }; function Nt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Bt(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Nt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Nt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var Et = function (e) { var n = e.coloring, t = e.setColoring; return (0, re.jsxs)(u.Flex, { alignItems: "center", justifyContent: "space-between", pl: 7, pr: 2, children: [(0, re.jsx)(u.Text, { children: "Graph coloring" }), (0, re.jsxs)(M.v2, { isLazy: !0, placement: "right", children: [(0, re.jsx)(M.j2, { as: g.Button, size: "sm", colorScheme: "", color: "black", rightIcon: (0, re.jsx)(V.ChevronDownIcon, {}), children: "degree" === n.method ? "Links" : "Communities" }), (0, re.jsx)(en.h_, { children: (0, re.jsxs)(M.qy, { minW: 10, zIndex: "popover", bgColor: "gray.200", children: [(0, re.jsx)(M.sN, { onClick: function () { return t((function (e) { return Bt(Bt({}, e), {}, { method: "degree" }) })) }, justifyContent: "space-between", alignItems: "center", display: "flex", children: "Number of links" }), (0, re.jsx)(M.sN, { onClick: function () { return t((function (e) { return Bt(Bt({}, e), {}, { method: "community" }) })) }, justifyContent: "space-between", alignItems: "center", display: "flex", children: "Communities" })] }) })] })] }) }, Lt = function (e) { var n = e.coloring, t = e.setColoring, r = e.visuals, o = e.setVisuals, i = e.highlightColor, l = e.setHighlightColor, s = e.threeDim, c = (0, v.useCallback)((function (e) { return o(e) }), []); return (0, re.jsxs)(u.VStack, { justifyContent: "flex-start", align: "stretch", children: [(0, re.jsx)(St, {}), (0, re.jsx)(Et, { coloring: n, setColoring: t }), (0, re.jsxs)(Zn.UQ, { allowToggle: !0, defaultIndex: [0], paddingLeft: 3, children: [(0, re.jsxs)(Zn.Qd, { children: [(0, re.jsx)(Zn.KF, { children: (0, re.jsxs)(u.Flex, { justifyContent: "space-between", w: "100%", children: [(0, re.jsx)(u.Text, { children: "Colors" }), (0, re.jsx)(Zn.XE, { marginRight: 2 })] }) }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(jt, { visuals: r, setVisualsCallback: c, highlightColor: i, setHighlightColor: l }) })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsx)(Zn.KF, { children: (0, re.jsxs)(u.Flex, { justifyContent: "space-between", w: "100%", children: [(0, re.jsx)(u.Text, { children: "Nodes & Links" }), (0, re.jsx)(Zn.XE, { marginRight: 2 })] }) }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(yt, { visuals: r, setVisuals: c, threeDim: s }) })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsx)(Zn.KF, { children: (0, re.jsxs)(u.Flex, { justifyContent: "space-between", w: "100%", children: [(0, re.jsx)(u.Text, { children: "Labels" }), (0, re.jsx)(Zn.XE, { marginRight: 2 })] }) }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(wt, { visuals: r, setVisuals: c }) })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsx)(Zn.KF, { children: (0, re.jsxs)(u.Flex, { justifyContent: "space-between", w: "100%", children: [(0, re.jsx)(u.Text, { children: "Highlighting" }), (0, re.jsx)(Zn.XE, { marginRight: 2 })] }) }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(ht, { visuals: r, setVisuals: c }) })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsx)(Zn.KF, { children: (0, re.jsxs)(u.Flex, { justifyContent: "space-between", w: "100%", children: [(0, re.jsx)(u.Text, { children: "Citations" }), (0, re.jsx)(Zn.XE, { marginRight: 2 })] }) }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(Pt, { visuals: r, setVisuals: c }) })] })] })] }) }, Tt = ["style"]; function Rt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Ft(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Rt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Rt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var zt = function (e) { var n = e.physics, t = e.setPhysics, r = e.threeDim, o = e.setThreeDim, i = e.filter, s = e.setFilter, c = e.visuals, a = e.setVisuals, d = e.mouse, f = e.setMouse, p = e.behavior, x = e.setBehavior, b = e.tags, j = e.tagColors, m = e.setTagColors, y = e.coloring, C = e.setColoring, O = e.local, w = e.setLocal, k = En("showTweaks", !1), S = (0, l.Z)(k, 2), I = S[0], D = S[1], P = (0, v.useContext)(nn.N), N = P.highlightColor, B = P.setHighlightColor; return I ? (0, re.jsxs)(u.Box, { position: "absolute", bg: "alt.100", w: "xs", marginTop: 2, marginLeft: 2, borderRadius: "lg", paddingBottom: 5, zIndex: 10, boxShadow: "xl", maxH: "95vh", fontSize: "sm", children: [(0, re.jsxs)(u.Box, { display: "flex", justifyContent: "space-between", alignItems: "center", paddingRight: 2, paddingTop: 1, children: [(0, re.jsx)(h.u, { label: "2D", children: (0, re.jsx)(g.Button, { onClick: function () { return o(!r) }, variant: "subtle", zIndex: "overlay", children: r ? "3D" : "2D" }) }), (0, re.jsxs)(u.Box, { display: "flex", alignItems: "center", children: [(0, re.jsx)(h.u, { label: "Reset settings to defaults", children: (0, re.jsx)(g.IconButton, { "aria-label": "Reset Defaults", icon: (0, re.jsx)(V.RepeatClockIcon, {}), onClick: function () { a(F), s(T), f(Z), t(L), x(z), C(R), B("purple.500"), w(H) }, variant: "subtle", size: "sm" }) }), (0, re.jsx)(g.IconButton, { size: "sm", icon: (0, re.jsx)(V.CloseIcon, {}), "aria-label": "Close Tweak Panel", variant: "subtle", onClick: function () { return D(!1) } })] })] }), (0, re.jsx)(ln.ZP, { autoHeight: !0, autoHeightMax: .85 * globalThis.innerHeight, autoHide: !0, renderThumbVertical: function (e) { var n = e.style, t = (0, Y.Z)(e, Tt); return (0, re.jsx)(u.Box, Ft(Ft({}, t), {}, { style: Ft(Ft({}, n), {}, { borderRadius: 10 }), bg: N })) }, children: (0, re.jsxs)(Zn.UQ, { allowMultiple: !0, allowToggle: !0, color: "black", children: [(0, re.jsxs)(Zn.Qd, { children: [(0, re.jsxs)(Zn.KF, { children: [(0, re.jsx)(Zn.XE, { marginRight: 2 }), (0, re.jsx)(u.Heading, { size: "sm", children: "Filter" })] }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(et, { filter: i, setFilter: s, tagColors: j, setTagColors: m, highlightColor: N, colorList: A, tags: b, local: O, setLocal: w }) })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsx)(Zn.KF, { display: "flex", justifyContent: "space-between", children: (0, re.jsxs)(u.Box, { display: "flex", children: [(0, re.jsx)(Zn.XE, { marginRight: 2 }), (0, re.jsx)(u.Heading, { size: "sm", children: "Physics" })] }) }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(it, { physics: n, setPhysics: t }) })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsxs)(Zn.KF, { children: [(0, re.jsx)(Zn.XE, { marginRight: 2 }), (0, re.jsx)(u.Heading, { size: "sm", children: "Visual" })] }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(Lt, { visuals: c, setVisuals: a, highlightColor: N, setHighlightColor: B, threeDim: r, coloring: y, setColoring: C }) })] }), (0, re.jsxs)(Zn.Qd, { children: [(0, re.jsxs)(Zn.KF, { children: [(0, re.jsx)(Zn.XE, { marginRight: 2 }), (0, re.jsx)(u.Heading, { size: "sm", children: "Behavior" })] }), (0, re.jsx)(Zn.Hk, { children: (0, re.jsx)(ct, { behavior: p, setBehavior: x, mouse: d, setMouse: f }) })] })] }) })] }) : (0, re.jsx)(u.Box, { position: "absolute", zIndex: "overlay", marginTop: 1, marginLeft: 0, display: I ? "none" : "block", children: (0, re.jsx)(g.IconButton, { variant: "subtle", "aria-label": "Settings", icon: (0, re.jsx)(V.SettingsIcon, {}), onClick: function () { return D(!0) } }) }) }, Zt = t(22663), Ht = t.n(Zt); function At(e) { var n, t, r, i, l = e.labelBackgroundColor, s = e.labelTextColor, c = e.node, a = e.ctx, d = e.globalScale, u = e.highlightedNodes, h = e.previouslyHighlightedNodes, g = e.visuals, f = e.opacity, p = e.nodeSize, x = e.filteredLinksByNodeId, b = (e.nodeRel, e.hoverNode), j = e.lastHoverNode; if (c && g.labels) { var v = null !== (n = null === b || void 0 === b ? void 0 : b.id) && void 0 !== n ? n : "", m = null !== (t = null === j || void 0 === j ? void 0 : j.id) && void 0 !== t ? t : "", y = null !== (r = x[c.id]) && void 0 !== r ? r : [], C = !(!u[c.id] && !h[c.id]), O = Math.min(5 * (d - g.labelScale) + 2 * Math.pow(Math.min(y.length, g.labelDynamicDegree), g.labelDynamicStrength), 1); if (!(O < .01) || C) { var w = null !== (i = c.title) && void 0 !== i ? i : "", k = w.substring(0, g.labelLength), S = Math.cbrt(g.nodeRel * p(c) / Math.pow(d, g.nodeZoomSize)), I = g.labelFontSize / Math.cbrt(Math.pow(d, g.nodeZoomSize)), D = [1.1 * a.measureText(k).width, I].map((function (e) { return e + .5 * I })), P = function (e, n, t, r, o) { return o ? Math.max(e, r) : 1 * e * (-1 * (n.highlightFade * r - 1)) }(O, g, 0, f, C); if (g.labelBackgroundColor && g.labelBackgroundOpacity) { var N = Qt(l, P * g.labelBackgroundOpacity); a.fillStyle = N, a.fillRect.apply(a, [c.x - D[0] / 2, c.y - D[1] / 2 + S].concat((0, o.Z)(D))) } a.textAlign = "center", a.textBaseline = "middle"; var B = Qt(s, P); a.fillStyle = B, a.font = "".concat(I, "px Sans-Serif"); var E = Ht()(k, { width: g.labelWordWrap }).split("\n"), L = w.length > g.labelLength ? [].concat((0, o.Z)(E.slice(0, -1)), ["".concat(E.slice(-1), "...")]) : E, T = [v, m].includes(c.id) ? 1 + .3 * f : 1; L.forEach((function (e, n) { a.fillText(e, c.x, c.y + T * S * 8 + g.labelLineSpace * I * n) })) } } } function Mt(e, n) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable }))), t.push.apply(t, r) } return t } function Wt(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}; n % 2 ? Mt(Object(t), !0).forEach((function (n) { (0, i.Z)(e, n, t[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Mt(Object(t)).forEach((function (n) { Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n)) })) } return e } var Vt = t.e(907).then(t.bind(t, 99907)), _t = t.g.window ? t(24878).f$ : null, Gt = t.g.window ? t(24878).s6 : null; function Yt() { var e = (0, v.useState)(!1), n = e[0], t = e[1]; return (0, v.useEffect)((function () { t(!0) }), []), n ? (0, re.jsxs)(re.Fragment, { children: [(0, re.jsx)(j.default, { children: (0, re.jsx)("title", { children: "ORUI" }) }), (0, re.jsx)(Ut, {})] }) : null } function Ut() { var e = En("3d", !1), n = (0, l.Z)(e, 2), t = n[0], r = n[1], s = En("tagCols", {}), c = (0, l.Z)(s, 2), f = c[0], p = c[1], b = (0, v.useState)({ nodeIds: [], excludedNodeIds: [] }), j = b[0], m = b[1], y = En("physics", L), w = (0, l.Z)(y, 2), S = w[0], I = w[1], D = En("filter", T), P = (0, l.Z)(D, 2), N = P[0], B = P[1], E = En("visuals", F), A = (0, l.Z)(E, 2), M = A[0], W = A[1], V = (0, v.useState)(null), _ = V[0], G = V[1], Y = (0, v.useState)(null), U = Y[0], K = (Y[1], En("behavior", z)), q = (0, l.Z)(K, 2), X = q[0], J = q[1], Q = En("mouse", Z), $ = (0, l.Z)(Q, 2), ee = $[0], ne = $[1], te = En("coloring", R), oe = (0, l.Z)(te, 2), ie = oe[0], le = oe[1], se = En("local", H), ce = (0, l.Z)(se, 2), ae = ce[0], de = ce[1], ue = (0, k.Z)({}), he = (0, l.Z)(ue, 2), ge = he[0], pe = he[1], xe = pe.set, be = pe.reset, je = pe.undo, ve = pe.redo, me = pe.canUndo, ye = pe.canRedo, Ce = (ge.past, ge.present), Oe = (ge.future, (0, v.useState)(null)), we = Oe[0], ke = Oe[1], Se = (0, d.qY)(), Ie = Se.isOpen, De = Se.onOpen, Pe = Se.onClose, Ne = (0, v.useRef)({}), Be = (0, v.useRef)({}), Ee = (0, v.useRef)({}), Le = (0, v.useRef)([]), Te = (0, v.useRef)(null), Re = (0, v.useState)({}), Fe = Re[0], ze = (Re[1], (0, v.useRef)({})), Ze = (0, v.useRef)({ nodes: [], links: [] }); (0, v.useEffect)((function () { _ ? Ze.current = _ : function (e) { var n, t, r, s = Ne.current; Le.current = null !== (n = e.tags) && void 0 !== n ? n : []; var c = null !== (t = e.nodes) && void 0 !== t ? t : [], a = null !== (r = e.links) && void 0 !== r ? r : [], d = c.reduce((function (e, n) { var t; return Wt(Wt({}, e), {}, (0, i.Z)({}, n.file, [].concat((0, o.Z)(null !== (t = e[n.file]) && void 0 !== t ? t : []), [n]))) }), {}), u = Object.keys(d).flatMap((function (e) { var n, t = null !== (n = d[e]) && void 0 !== n ? n : [], r = t.find((function (e) { return 0 === e.level })), o = t.filter((function (e) { return 0 !== e.level })); return r ? o.map((function (e) { var n = t.filter((function (n) { var t, r; return !(n.level >= e.level || n.pos >= e.pos || null === (t = e.olp) || void 0 === t || !t.includes(null === (r = n.title) || void 0 === r ? void 0 : r.replace(/ *\[\d*\/\d*\] */g, ""))) })).reduce((function (e, n) { return n.level > e.level && (e = n), e }), r); return { source: e.id, target: (null === n || void 0 === n ? void 0 : n.id) || r.id, type: "heading" } })) : [] })), h = Object.keys(d).flatMap((function (e) { var n, t = null !== (n = d[e]) && void 0 !== n ? n : [], r = t.find((function (e) { return 0 === e.level })), o = t.filter((function (e) { return 0 !== e.level })); return r ? o.map((function (e) { return { source: e.id, target: r.id, type: "parent" } })) : [] })); Ne.current = Object.fromEntries(c.map((function (e) { return [e.id, e] }))); var g = [].concat((0, o.Z)(a), (0, o.Z)(u), (0, o.Z)(h)), f = [], p = g.map((function (e) { var n = e.source, t = e.target; return Ne.current[n] ? Ne.current[t] ? e : (f.push({ id: t, tags: ["bad"], properties: { FILELESS: "yes", bad: "yes" }, file: "", title: t, level: 0, pos: 0, olp: null }), Wt(Wt({}, e), {}, { type: "bad" })) : (f.push({ id: n, tags: ["bad"], properties: { FILELESS: "yes", bad: "yes" }, file: "", title: n, level: 0, pos: 0, olp: null }), Wt(Wt({}, e), {}, { type: "bad" })) })); Ne.current = Wt(Wt({}, Ne.current), Object.fromEntries(f.map((function (e) { return [e.id, e] })))), Be.current = p.reduce((function (e, n) { var t, r, l; return Wt(Wt({}, e), {}, (l = {}, (0, i.Z)(l, n.source, [].concat((0, o.Z)(null !== (t = e[n.source]) && void 0 !== t ? t : []), [n])), (0, i.Z)(l, n.target, [].concat((0, o.Z)(null !== (r = e[n.target]) && void 0 !== r ? r : []), [n])), l)) }), {}); var x = [].concat((0, o.Z)(c), f); Ee.current = x.reduce((function (e, n) { var t, r = null === (t = n.properties) || void 0 === t ? void 0 : t.ROAM_REFS; if (null === r || void 0 === r || !r.includes("cite")) return e; var o = r.replaceAll(/cite:(.*)/g, "$1"); return o ? Wt(Wt({}, e), {}, (0, i.Z)({}, o, n)) : e }), {}); var b = { nodes: x, links: p }, j = Ze.current; if (0 === j.nodes.length) { var v = JSON.parse(JSON.stringify(b)); return Ze.current = v, void G(v) } var m = [].concat((0, o.Z)(j.nodes.flatMap((function (e) { var n, t = null !== (n = Ne.current[null === e || void 0 === e ? void 0 : e.id]) && void 0 !== n && n; return t ? [Wt(Wt({}, e), t)] : [] }))), (0, o.Z)(Object.keys(Ne.current).filter((function (e) { return !s[e] })).map((function (e) { return Ne.current[e] })))), y = m.reduce((function (e, n, t) { var r = null === n || void 0 === n ? void 0 : n.id; return Wt(Wt({}, e), {}, (0, i.Z)({}, r, t)) }), {}), C = p.map((function (e) { var n = Xt(e), t = (0, l.Z)(n, 2), r = t[0], o = t[1]; return Wt(Wt({}, e), {}, { source: m[y[r]], target: m[y[o]] }) })); G({ nodes: m, links: C }) }(a.a) }), [_]); (0, v.useContext)(nn.N).setEmacsTheme; var He = (0, v.useRef)({ nodeIds: [], excludedNodeIds: [] }), Ae = (0, v.useRef)(z); Ae.current = X; var Me = (0, v.useRef)(null); He.current = j; (0, v.useEffect)((function () { var e = Te.current; !e || j.nodeIds.length > 1 || (j.nodeIds.length || !S.gravityOn ? setTimeout((function () { e.zoomToFit(5, 200) }), 50) : e.zoomToFit()) }), [j.nodeIds]); var We = (0, x.iP)(), Ve = (0, l.Z)(We, 2), _e = Ve[0], Ge = Ve[1], Ye = (0, v.useRef)(), Ue = (0, v.useState)(null), Ke = Ue[0], qe = Ue[1], Xe = (0, v.useState)({ left: 0, top: 0, right: void 0, bottom: void 0 }), Je = Xe[0], Qe = Xe[1], $e = (0, d.qY)(); (0, d.O3)({ ref: Ye, handler: function () { $e.onClose() } }); var en = function (e, n, t) { Qe(t || { left: n.pageX, top: n.pageY, right: void 0, bottom: void 0 }), qe(e), $e.onOpen() }, tn = function (e, n) { "remove" !== n ? "replace" !== n ? j.nodeIds.includes(e.id) || m((function (n) { return Wt(Wt({}, n), {}, { nodeIds: [].concat((0, o.Z)(n.nodeIds), [e.id]) }) })) : m({ nodeIds: [e.id], excludedNodeIds: [] }) : m((function (n) { return Wt(Wt({}, n), {}, { excludedNodeIds: [].concat((0, o.Z)(n.excludedNodeIds), [e.id]) }) })) }, rn = (0, v.useState)({ type: "Graph", title: "Graph", icon: (0, re.jsx)(C.DvO, {}) }), on = (rn[0], rn[1], En("mainWindowWidth", _e)), ln = (0, l.Z)(on, 2), sn = ln[0], cn = ln[1]; return console.log(Fe), (0, re.jsx)(Jn.Provider, { value: Wt({}, Fe), children: (0, re.jsxs)(u.Box, { display: "flex", alignItems: "flex-start", flexDirection: "row", height: "100vh", overflow: "clip", children: [(0, re.jsx)(zt, { physics: S, setPhysics: I, threeDim: t, setThreeDim: r, filter: N, setFilter: B, visuals: M, setVisuals: W, mouse: ee, setMouse: ne, behavior: X, setBehavior: J, tagColors: f, setTagColors: p, coloring: ie, setColoring: le, local: ae, setLocal: de, tags: Le.current }), (0, re.jsx)(u.Box, { position: "absolute", children: _ && (0, re.jsx)(Kt, { nodeById: Ne.current, linksByNodeId: Be.current, webSocket: Me.current, variables: Fe, physics: S, graphData: _, threeDim: t, emacsNodeId: U, filter: N, visuals: M, behavior: X, mouse: ee, scope: j, setScope: m, tagColors: f, setPreviewNode: xe, sidebarHighlightedNode: we, windowWidth: _e, windowHeight: Ge, openContextMenu: en, contextMenu: $e, handleLocal: tn, mainWindowWidth: sn, setMainWindowWidth: cn, setContextMenuTarget: qe, graphRef: Te, clusterRef: ze, coloring: ie, local: ae }) }), (0, re.jsx)(u.Box, { position: "relative", zIndex: 4, width: "100%", children: (0, re.jsx)(u.Flex, { className: "headerBar", h: 10, flexDir: "column", children: (0, re.jsx)(u.Flex, { alignItems: "center", h: 10, justifyContent: "flex-end", children: (0, re.jsxs)(u.Flex, { height: "100%", flexDirection: "row", children: [j.nodeIds.length > 0 && (0, re.jsx)(h.u, { label: "Return to main graph", children: (0, re.jsx)(g.IconButton, { m: 1, icon: (0, re.jsx)(C.DvO, {}), "aria-label": "Exit local mode", onClick: function () { return m((function (e) { return Wt(Wt({}, e), {}, { nodeIds: [] }) })) }, variant: "subtle" }) }), (0, re.jsx)(h.u, { label: Ie ? "Close sidebar" : "Open sidebar", children: (0, re.jsx)(g.IconButton, { m: 1, icon: (0, re.jsx)(O.iBV, {}), "aria-label": "Close file-viewer", variant: "subtle", onClick: Ie ? Pe : De }) })] }) }) }) }), (0, re.jsx)(u.Box, { position: "relative", zIndex: 4, children: (0, re.jsx)(zn, { isOpen: Ie, onOpen: De, onClose: Pe, previewNode: Ce, setPreviewNode: xe, canUndo: me, canRedo: ye, previousPreviewNode: je, nextPreviewNode: ve, resetPreviewNode: be, setSidebarHighlightedNode: ke, openContextMenu: en, scope: j, setScope: m, windowWidth: _e, tagColors: f, setTagColors: p, filter: N, setFilter: B, macros: Fe.katexMacros, attachDir: Fe.attachDir || "", nodeById: Ne.current, linksByNodeId: Be.current, nodeByCite: Ee.current }) }), $e.isOpen && (0, re.jsx)("div", { ref: Ye, children: (0, re.jsx)(fe, { scope: j, target: Ke, background: !1, coordinates: Je, handleLocal: tn, menuClose: $e.onClose.bind($e), webSocket: Me.current, setPreviewNode: xe, setFilter: B, filter: N, setTagColors: p, tagColors: f }) })] }) }) } var Kt = function (e) { var n = e.graphRef, t = e.physics, s = e.graphData, a = e.threeDim, d = e.linksByNodeId, h = e.filter, g = e.emacsNodeId, x = e.nodeById, j = e.visuals, m = e.behavior, C = e.mouse, O = e.scope, k = e.local, S = (e.setScope, e.webSocket), I = e.tagColors, D = e.setPreviewNode, P = e.sidebarHighlightedNode, N = e.windowWidth, B = e.windowHeight, L = (e.setContextMenuTarget, e.openContextMenu), T = e.contextMenu, R = e.handleLocal, F = e.variables, z = e.clusterRef, Z = e.coloring, H = F.dailyDir, M = (F.roamDir, (0, v.useState)(null)), W = M[0], V = M[1], _ = (0, f.Fg)(), Y = (0, v.useContext)(nn.N).emacsTheme, U = function (e, n, t) { switch (e) { case C.preview: D(n); break; case C.local: R(n, m.localSame); break; case C.follow: G(n, S); break; case C.context: L(n, t) } }, K = (0, v.useRef)(null); (0, v.useEffect)((function () { g && V(x[g]) }), [g]); var q = (0, v.useRef)({}), X = (0, v.useRef)({}), J = (0, v.useMemo)((function () { var e; X.current = {}; var n = null === s || void 0 === s || null === (e = s.nodes) || void 0 === e ? void 0 : e.filter((function (e) { var n, t, r, o, l = e; return h.dirsBlocklist.length && h.dirsBlocklist.some((function (e) { var n; return null === l || void 0 === l || null === (n = l.file) || void 0 === n ? void 0 : n.includes(e) })) || h.dirsAllowlist.length > 0 && !h.dirsAllowlist.some((function (e) { var n; return null === l || void 0 === l || null === (n = l.file) || void 0 === n ? void 0 : n.includes(e) })) || h.tagsBlacklist.length && h.tagsBlacklist.some((function (e) { var n; return (null === l || void 0 === l || null === (n = l.tags) || void 0 === n ? void 0 : n.indexOf(e)) > -1 })) || h.tagsWhitelist.length > 0 && !h.tagsWhitelist.some((function (e) { var n; return (null === l || void 0 === l || null === (n = l.tags) || void 0 === n ? void 0 : n.indexOf(e)) > -1 })) || h.filelessCites && null !== l && void 0 !== l && null !== (n = l.properties) && void 0 !== n && n.FILELESS || null !== h && void 0 !== h && h.bad && null !== l && void 0 !== l && null !== (t = l.properties) && void 0 !== t && t.bad || h.dailies && H && null !== (r = l.file) && void 0 !== r && r.includes(H) ? (X.current = Wt(Wt({}, X.current), {}, (0, i.Z)({}, l.id, l)), !1) : !h.noter || null === (o = l.properties) || void 0 === o || !o.NOTER_PAGE || (X.current = Wt(Wt({}, X.current), {}, (0, i.Z)({}, l.id, l)), !1) })).filter((function (e) { var n, t = (null !== (n = d[null === e || void 0 === e ? void 0 : e.id]) && void 0 !== n ? n : []).filter((function (e) { return !X.current[e.source] && !X.current[e.target] })); return !h.orphans || (h.parent ? 0 !== t.length : 0 !== t.length && t.some((function (e) { return !["parent", "heading"].includes(e.type) }))) })), t = n.map((function (e) { return e.id })), r = s.links.filter((function (e) { var n = Xt(e), r = (0, l.Z)(n, 2), o = r[0], i = r[1]; if (!t.includes(o) || !t.includes(i)) return !1; var s = e; return h.parent ? "heading" === h.parent ? "parent" !== s.type : "heading" !== s.type : !["parent", "heading"].includes(s.type) })); q.current = r.reduce((function (e, n) { var t, r, s, c = n, a = Xt(c), d = (0, l.Z)(a, 2), u = d[0], h = d[1]; return Wt(Wt({}, e), {}, (s = {}, (0, i.Z)(s, u, [].concat((0, o.Z)(null !== (t = e[u]) && void 0 !== t ? t : []), [c])), (0, i.Z)(s, h, [].concat((0, o.Z)(null !== (r = e[h]) && void 0 !== r ? r : []), [c])), s)) }), {}); var c = r.map((function (e) { var n = Xt(e), t = (0, l.Z)(n, 2); return { target: t[0], source: t[1], weight: "cite" === e.type ? 1 : 2 } })); if ("community" === Z.method) { var a = y()().nodes(t).edges(c); z.current = a() } return { nodes: n, links: r } }), [h, s, Z.method]), Q = (0, v.useState)({ nodes: [], links: [] }), $ = Q[0], ee = Q[1]; (0, v.useEffect)((function () { if (O.nodeIds.length) { var e = O.nodeIds.length > 1 ? $.nodes.filter((function (e) { return !O.excludedNodeIds.includes(e.id) })) : [], n = e.map((function (e) { return e.id })), t = function (e, n, t) { var r = [e[0]], o = [], i = [e[0]]; return Array.from({ length: t }, (function () { r.forEach((function (e) { var t; (null !== (t = q.current[e]) && void 0 !== t ? t : []).forEach((function (e) { var t = Xt(e), r = (0, l.Z)(t, 2), s = r[0], c = r[1]; n.some((function (e) { return [s, c].includes(e) })) || (i.includes(s) ? i.includes(c) || o.push(c) : o.push(s)) })) })), r = o, o.forEach((function (e) { return e && i.push(e) })), o = [] })), i }(O.nodeIds, O.excludedNodeIds, k.neighbors), r = J.nodes.filter((function (r) { var o; return e.length ? !n.includes(r.id) && (null !== (o = q.current[r.id]) && void 0 !== o ? o : []).some((function (e) { var n = Xt(e), t = (0, l.Z)(n, 2), r = t[0], o = t[1]; return O.nodeIds.includes(r) || O.nodeIds.includes(o) })) : t.includes(r.id) })).map((function (e) { return Wt(Wt({}, e), {}, { x: 0, y: 0, vy: 0, vx: 0 }) })), i = [].concat((0, o.Z)(e), (0, o.Z)(r)), s = i.map((function (e) { return e.id })), c = (O.nodeIds.length > 1 ? $.links : []).filter((function (e) { O.excludedNodeIds.some((function (n) { return Xt(e).includes(n) })) })), a = J.links.filter((function (e) { var t = Xt(e), r = (0, l.Z)(t, 2), o = r[0], i = r[1]; return !(c.length && n.includes(i) && n.includes(o)) && (s.includes(o) && s.includes(i)) })).map((function (e) { var n = Xt(e), t = (0, l.Z)(n, 2); return { source: t[0], target: t[1] } })), d = [].concat((0, o.Z)(c), (0, o.Z)(a)); ee({ nodes: i, links: d }) } }), [k.neighbors, h, JSON.stringify(O), JSON.stringify(s), J.links, J.nodes]), (0, v.useEffect)((function () { (0, r.Z)(c().mark((function e() { var r, o; return c().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return r = n.current, e.next = 3, Vt; case 3: o = e.sent, !t.gravityOn || O.nodeIds.length && !t.gravityLocal ? (r.d3Force("x", null), r.d3Force("y", null), a && r.d3Force("z", null)) : (r.d3Force("x", o.forceX().strength(t.gravity)), r.d3Force("y", o.forceY().strength(t.gravity)), a && r.d3Force("z", o.forceZ().strength(t.gravity))), t.centering ? r.d3Force("center", o.forceCenter().strength(t.centeringStrength)) : r.d3Force("center", null), t.linkStrength && r.d3Force("link").strength(t.linkStrength), t.linkIts && r.d3Force("link").iterations(t.linkIts), t.charge && r.d3Force("charge").strength(t.charge), r.d3Force("collide", t.collision ? o.forceCollide().radius(t.collisionStrength) : null); case 10: case "end": return e.stop() } }), e) })))() }), [t, a, O]), (0, v.useEffect)((function () { var e; null === (e = n.current) || void 0 === e || e.d3ReheatSimulation() }), [t, O.nodeIds.length]); var ne = (0, v.useRef)(0), te = (0, v.useState)(1), oe = te[0], ie = te[1], le = (0, p._7)((function (e) { return ie(e) }), { duration: j.animationSpeed, algorithm: E[j.algorithmName] }), se = (0, l.Z)(le, 2), ce = se[0], ae = se[1], de = (0, p._7)((function (e) { return ie(Math.min(oe, -1 * (e - 1))) }), { duration: j.animationSpeed, algorithm: E[j.algorithmName] }), ue = (0, l.Z)(de, 2), he = ue[0], ge = ue[1], fe = (0, v.useMemo)((function () { var e; if (!K.current) return {}; var n = q.current[K.current.id]; return n ? Object.fromEntries([null === (e = K.current) || void 0 === e ? void 0 : e.id].concat((0, o.Z)(n.flatMap((function (e) { return [e.source, e.target] })))).map((function (e) { return [e, {}] }))) : {} }), [JSON.stringify(K.current), JSON.stringify(q.current)]); (0, v.useEffect)((function () { null !== P && void 0 !== P && P.id ? V(P) : V(null) }), [P]); var pe = (0, v.useRef)(null); (0, v.useEffect)((function () { if (K.current = W, W && (pe.current = W), !j.highlightAnim) return ie(W ? 1 : 0); W ? ce() : (ae(), oe > .5 ? he() : ie(0)) }), [W]); var xe = (0, v.useMemo)((function () { return Object.fromEntries(A.map((function (e) { var n = Jt(e, _), t = A.map((function (e) { return [e, b.Z(n, Jt(e, _))] })); return [e, Object.fromEntries(t)] }))) }), [Y]), be = (0, v.useMemo)((function () { var e, n, t, r = null !== (e = q.current[null === (n = pe.current) || void 0 === n ? void 0 : n.id]) && void 0 !== e ? e : []; return Object.fromEntries([null === (t = pe.current) || void 0 === t ? void 0 : t.id].concat((0, o.Z)(r.flatMap((function (e) { return Xt(e) })))).map((function (e) { return [e, {}] }))) }), [JSON.stringify(W), pe.current, q.current]), je = function (e) { var n, t, r, o, i, l = null !== (n = null === (t = q.current[e]) || void 0 === t ? void 0 : t.length) && void 0 !== n ? n : 0; return "degree" === Z.method ? j.nodeColorScheme[(r = l, o = 0, i = j.nodeColorScheme.length - 1, Math.min(Math.max(r, o), i))] : j.nodeColorScheme[l && z.current[e] % j.nodeColorScheme.length] }, ve = function (e, n) { return q.current[e].length > q.current[n].length ? je(e) : je(n) }, me = (0, v.useMemo)((function () { return Jt(j.labelTextColor, _) }), [j.labelTextColor, Y]), ye = (0, v.useMemo)((function () { return Jt(j.labelBackgroundColor, _) }), [j.labelBackgroundColor, Y]), Ce = function (e) { var n, t = null !== (n = q.current[e.id]) && void 0 !== n ? n : [], r = t.length ? t.filter((function (e) { return "parent" === e.type })).length : 0, o = 3 + t.length * j.nodeSizeLinks - (h.parent ? 0 : r); return 1 === j.highlightNodeSize ? o : o * (fe[e.id] || be[e.id] ? 1 + oe * (j.highlightNodeSize - 1) : 1) }, Oe = (0, v.useState)(!1), we = Oe[0], ke = Oe[1], Se = (0, v.useRef)(1), Ie = { graphData: O.nodeIds.length ? $ : J, width: N, height: B, backgroundColor: Jt(j.backgroundColor, _), warmupTicks: 1 === O.nodeIds.length ? 100 : O.nodeIds.length > 1 ? 20 : 0, onZoom: function (e) { var n = e.k; e.x, e.y; return Se.current = n }, nodeColor: function (e) { return function (e, n) { var t, r, o = fe[e.id] || be[e.id]; if (j.emacsNodeColor && e.id === g) return Jt(j.emacsNodeColor, n); if (I && null !== e && void 0 !== e && e.tags.some((function (e) { return I[e] }))) { var i = I[null === e || void 0 === e ? void 0 : e.tags.filter((function (e) { return I[e] }))[0]]; return o ? xe[i][i](j.highlightFade * oe) : xe[i][j.backgroundColor](j.highlightFade * oe) } return j.citeNodeColor && null !== e && void 0 !== e && null !== (t = e.properties) && void 0 !== t && t.ROAM_REFS && null !== e && void 0 !== e && null !== (r = e.properties) && void 0 !== r && r.FILELESS ? o ? Jt(j.citeNodeColor, n) : xe[j.citeNodeColor][j.backgroundColor](j.highlightFade * oe) : j.refNodeColor && e.properties.ROAM_REFS ? o ? Jt(j.refNodeColor, n) : xe[j.refNodeColor][j.backgroundColor](j.highlightFade * oe) : o ? j.nodeHighlight ? xe[je(e.id)][j.nodeHighlight](oe) : Jt(je(e.id), n) : xe[je(e.id)][j.backgroundColor](j.highlightFade * oe) }(e, _) }, nodeRelSize: j.nodeRel, nodeVal: function (e) { return Ce(e) / Math.pow(Se.current, j.nodeZoomSize) }, nodeCanvasObject: function (e, n, t) { At(Wt({ nodeRel: j.nodeRel, filteredLinksByNodeId: q.current, lastHoverNode: pe.current }, { node: e, ctx: n, globalScale: t, highlightedNodes: fe, previouslyHighlightedNodes: be, visuals: j, opacity: oe, nodeSize: Ce, labelTextColor: me, labelBackgroundColor: ye, hoverNode: W })) }, nodeCanvasObjectMode: function () { return "after" }, linkDirectionalParticles: j.particles ? j.particlesNumber : void 0, linkDirectionalArrowLength: j.arrows ? j.arrowsLength : void 0, linkDirectionalArrowRelPos: j.arrowsPos, linkDirectionalArrowColor: j.arrowsColor ? function () { return Jt(j.arrowsColor, _) } : void 0, linkColor: function (e) { var n, t = "object" === typeof e.source ? e.source.id : e.source, r = "object" === typeof e.target ? e.target.id : e.target, o = qt(e, K.current), i = qt(e, pe.current), l = o || i, s = e; return j.refLinkColor && "ref" === s.type ? l && (j.refLinkHighlightColor || j.linkHighlight) ? xe[j.refLinkColor][j.refLinkHighlightColor || j.linkHighlight](oe) : xe[j.refLinkColor][j.backgroundColor](j.highlightFade * oe) : j.citeLinkColor && null !== (n = s.type) && void 0 !== n && n.includes("cite") ? l && (j.citeLinkHighlightColor || j.linkHighlight) ? xe[j.citeLinkColor][j.citeLinkHighlightColor || j.linkHighlight](oe) : xe[j.citeLinkColor][j.backgroundColor](j.highlightFade * oe) : function (e, n, t, r) { if (!j.linkHighlight && !j.linkColorScheme && !t) return Jt(ve(e, n), r); if (!t && !j.linkColorScheme) { var o = ve(e, n); return xe[o][j.backgroundColor](j.highlightFade * oe) } return t ? j.linkHighlight || j.linkColorScheme ? j.linkHighlight ? j.linkColorScheme ? xe[j.linkColorScheme][j.linkHighlight](oe) : xe[ve(e, n)][j.linkHighlight](oe) : Jt(j.linkColorScheme, r) : Jt(ve(e, n), r) : xe[j.linkColorScheme][j.backgroundColor](j.highlightFade * oe) }(t, r, l, _) }, linkWidth: function (e) { if (1 === j.highlightLinkSize) return j.linkWidth; var n = qt(e, K.current), t = qt(e, pe.current); return n || t ? j.linkWidth * (1 + oe * (j.highlightLinkSize - 1)) : j.linkWidth }, linkDirectionalParticleWidth: j.particlesWidth, d3AlphaDecay: t.alphaDecay, d3AlphaMin: t.alphaMin, d3VelocityDecay: t.velocityDecay, onNodeClick: function (e, n) { var t = e, r = n.timeStamp - ne.current < 200; if (ne.current = n.timeStamp, r) return U("double", t, n); var o = ne.current; return setTimeout((function () { if (ne.current === o) return U("click", t, n) }), 200) }, onNodeHover: function (e) { j.highlight && (we || (W || (ge(), ie(0)), V(e))) }, onNodeRightClick: function (e, n) { U("right", e, n) }, onNodeDrag: function (e) { V(e), ke(!0) }, onNodeDragEnd: function () { V(null), ke(!1) } }; return (0, re.jsx)(u.Box, { overflow: "hidden", onClick: T.onClose, children: a ? (0, re.jsx)(Gt, Wt(Wt({ ref: n }, Ie), {}, { nodeThreeObjectExtend: !0, nodeOpacity: j.nodeOpacity, nodeResolution: j.nodeResolution, linkOpacity: j.linkOpacity, nodeThreeObject: function (e) { if (j.labels && (!(j.labels < 3) || fe[e.id])) { var n = new w.Z(e.title.substring(0, 40)); return n.color = Jt(j.labelTextColor, _), n.backgroundColor = Jt(j.labelBackgroundColor, _), n.padding = 2, n.textHeight = 8, n } } })) : (0, re.jsx)(_t, Wt(Wt({ ref: n }, Ie), {}, { linkLineDash: function (e) { var n, t = e; return j.citeDashes && null !== (n = t.type) && void 0 !== n && n.includes("cite") ? [j.citeDashLength, j.citeGapLength] : j.refDashes && "ref" == t.type ? [j.refDashLength, j.refGapLength] : null } })) }) }; function qt(e, n) { var t, r; return (null === (t = e.source) || void 0 === t ? void 0 : t.id) === (null === n || void 0 === n ? void 0 : n.id) || (null === (r = e.target) || void 0 === r ? void 0 : r.id) === (null === n || void 0 === n ? void 0 : n.id) } function Xt(e) { return ["object" === typeof e.source ? e.source.id : e.source, "object" === typeof e.target ? e.target.id : e.target] } function Jt(e, n) { return e.split(".").reduce((function (e, n) { return e[n] }), n.colors) } function Qt(e, n) { return "rgba(" + (e = e.replace("#", "")).match(new RegExp("(.{" + e.length / 3 + "})", "g")).map((function (n) { return parseInt(e.length % 2 ? n + n : n, 16) })).concat(isFinite(n) ? n : 1).join(",") + ")" } }, 45301: function (e, n, t) { (window.__NEXT_P = window.__NEXT_P || []).push(["/", function () { return t(95732) }]) } }, function (e) { e.O(0, [774, 737, 876, 228, 866, 13, 874, 573, 446, 676, 888, 179], (function () { return n = 45301, e(e.s = n); var n })); var n = e.O(); _N_E = n }]);